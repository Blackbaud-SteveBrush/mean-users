!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a,this.options=b=r({},b),a[L]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var d in c)!(d in b)&&(b[d]=c[d]);V(b);for(var f in this)"_"===f.charAt(0)&&(this[f]=this[f].bind(this));this.nativeDraggable=!b.forceFallback&&P,e(a,"mousedown",this._onTapStart),e(a,"touchstart",this._onTapStart),this.nativeDraggable&&(e(a,"dragover",this),e(a,"dragenter",this)),T.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){v&&v.state!==a&&(h(v,"display",a?"none":""),!a&&v.state&&w.insertBefore(v,s),v.state=a)}function c(a,b,c){if(a){c=c||N,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function d(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()}function e(a,b,c){a.addEventListener(b,c,!1)}function f(a,b,c){a.removeEventListener(b,c,!1)}function g(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(K," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(K," ")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return N.defaultView&&N.defaultView.getComputedStyle?c=N.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function i(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;e<f;e++)c(d[e],e);return d}return[]}function j(a,b,c,d,e,f,g){var h=N.createEvent("Event"),i=(a||b[L]).options,j="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0),h.to=b,h.from=e||b,h.item=d||b,h.clone=v,h.oldIndex=f,h.newIndex=g,b.dispatchEvent(h),i[j]&&i[j].call(a,h)}function k(a,b,c,d,e,f){var g,h,i=a[L],j=i.options.onMove;return g=N.createEvent("Event"),g.initEvent("move",!0,!0),g.to=b,g.from=a,g.dragged=c,g.draggedRect=d,g.related=e||b,g.relatedRect=f||b.getBoundingClientRect(),a.dispatchEvent(g),j&&(h=j.call(i,g)),h}function l(a){a.draggable=!1}function m(){R=!1}function n(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return(b.clientY-(d.top+d.height)>5||b.clientX-(d.right+d.width)>5)&&c}function o(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function p(a){var b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function q(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function r(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={},K=/\s+/g,L="Sortable"+(new Date).getTime(),M=window,N=M.document,O=M.parseInt,P=!!("draggable"in N.createElement("div")),Q=function(a){return a=N.createElement("x"),a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),R=!1,S=Math.abs,T=([].slice,[]),U=q(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(z!==c&&(y=b.scroll,z=c,y===!0)){y=c;do if(y.offsetWidth<y.scrollWidth||y.offsetHeight<y.scrollHeight)break;while(y=y.parentNode)}y&&(d=y,e=y.getBoundingClientRect(),f=(S(e.right-j)<=h)-(S(e.left-j)<=h),g=(S(e.bottom-k)<=h)-(S(e.top-k)<=h)),f||g||(f=(l-j<=h)-(j<=h),g=(m-k<=h)-(k<=h),(f||g)&&(d=M)),J.vx===f&&J.vy===g&&J.el===d||(J.el=d,J.vx=f,J.vy=g,clearInterval(J.pid),d&&(J.pid=setInterval(function(){d===M?M.scrollTo(M.pageXOffset+f*i,M.pageYOffset+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30),V=function(a){var b=a.group;b&&"object"==typeof b||(b=a.group={name:b}),["pull","put"].forEach(function(a){a in b||(b[a]=!0)}),a.groups=" "+b.name+(b.put.join?" "+b.put.join(" "):"")+" "};return a.prototype={constructor:a,_onTapStart:function(a){var b=this,d=this.el,e=this.options,f=a.type,g=a.touches&&a.touches[0],h=(g||a).target,i=h,k=e.filter;if(!("mousedown"===f&&0!==a.button||e.disabled)&&(h=c(h,e.draggable,d))){if(D=p(h),"function"==typeof k){if(k.call(this,a,h,this))return j(b,i,"filter",h,d,D),void a.preventDefault()}else if(k&&(k=k.split(",").some(function(a){if(a=c(i,a.trim(),d))return j(b,a,"filter",h,d,D),!0})))return void a.preventDefault();e.handle&&!c(i,e.handle,d)||this._prepareDragStart(a,g,h)}},_prepareDragStart:function(a,b,c){var d,f=this,h=f.el,j=f.options,k=h.ownerDocument;c&&!s&&c.parentNode===h&&(G=a,w=h,s=c,t=s.parentNode,x=s.nextSibling,F=j.group,d=function(){f._disableDelayedDrag(),s.draggable=!0,g(s,f.options.chosenClass,!0),f._triggerDragStart(b)},j.ignore.split(",").forEach(function(a){i(s,a.trim(),l)}),e(k,"mouseup",f._onDrop),e(k,"touchend",f._onDrop),e(k,"touchcancel",f._onDrop),j.delay?(e(k,"mouseup",f._disableDelayedDrag),e(k,"touchend",f._disableDelayedDrag),e(k,"touchcancel",f._disableDelayedDrag),e(k,"mousemove",f._disableDelayedDrag),e(k,"touchmove",f._disableDelayedDrag),f._dragStartTimer=setTimeout(d,j.delay)):d())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),f(a,"mouseup",this._disableDelayedDrag),f(a,"touchend",this._disableDelayedDrag),f(a,"touchcancel",this._disableDelayedDrag),f(a,"mousemove",this._disableDelayedDrag),f(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(G={target:s,clientX:a.clientX,clientY:a.clientY},this._onDragStart(G,"touch")):this.nativeDraggable?(e(s,"dragend",this),e(w,"dragstart",this._onDragStart)):this._onDragStart(G,!0);try{N.selection?N.selection.empty():window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){w&&s&&(g(s,this.options.ghostClass,!0),a.active=this,j(this,w,"start",s,w,D))},_emulateDragOver:function(){if(H){if(this._lastX===H.clientX&&this._lastY===H.clientY)return;this._lastX=H.clientX,this._lastY=H.clientY,Q||h(u,"display","none");var a=N.elementFromPoint(H.clientX,H.clientY),b=a,c=" "+this.options.group.name,d=T.length;if(b)do{if(b[L]&&b[L].options.groups.indexOf(c)>-1){for(;d--;)T[d]({clientX:H.clientX,clientY:H.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);Q||h(u,"display","")}},_onTouchMove:function(b){if(G){a.active||this._dragStarted(),this._appendGhost();var c=b.touches?b.touches[0]:b,d=c.clientX-G.clientX,e=c.clientY-G.clientY,f=b.touches?"translate3d("+d+"px,"+e+"px,0)":"translate("+d+"px,"+e+"px)";I=!0,H=c,h(u,"webkitTransform",f),h(u,"mozTransform",f),h(u,"msTransform",f),h(u,"transform",f),b.preventDefault()}},_appendGhost:function(){if(!u){var a,b=s.getBoundingClientRect(),c=h(s),d=this.options;u=s.cloneNode(!0),g(u,d.ghostClass,!1),g(u,d.fallbackClass,!0),h(u,"top",b.top-O(c.marginTop,10)),h(u,"left",b.left-O(c.marginLeft,10)),h(u,"width",b.width),h(u,"height",b.height),h(u,"opacity","0.8"),h(u,"position","fixed"),h(u,"zIndex","100000"),h(u,"pointerEvents","none"),d.fallbackOnBody&&N.body.appendChild(u)||w.appendChild(u),a=u.getBoundingClientRect(),h(u,"width",2*b.width-a.width),h(u,"height",2*b.height-a.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;this._offUpEvents(),"clone"==F.pull&&(v=s.cloneNode(!0),h(v,"display","none"),w.insertBefore(v,s)),b?("touch"===b?(e(N,"touchmove",this._onTouchMove),e(N,"touchend",this._onDrop),e(N,"touchcancel",this._onDrop)):(e(N,"mousemove",this._onTouchMove),e(N,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,s)),e(N,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var d,e,f,g=this.el,i=this.options,j=i.group,l=j.put,o=F===j,p=i.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!i.dragoverBubble&&a.stopPropagation()),I=!0,F&&!i.disabled&&(o?p||(f=!w.contains(s)):F.pull&&l&&(F.name===j.name||l.indexOf&&~l.indexOf(F.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(U(a,i,this.el),R)return;if(d=c(a.target,i.draggable,g),e=s.getBoundingClientRect(),f)return b(!0),void(v||x?w.insertBefore(s,v||x):p||w.appendChild(s));if(0===g.children.length||g.children[0]===u||g===a.target&&(d=n(g,a))){if(d){if(d.animated)return;r=d.getBoundingClientRect()}b(o),k(w,g,s,e,d,r)!==!1&&(s.contains(g)||(g.appendChild(s),t=g),this._animate(e,s),d&&this._animate(r,d))}else if(d&&!d.animated&&d!==s&&void 0!==d.parentNode[L]){A!==d&&(A=d,B=h(d),C=h(d.parentNode));var q,r=d.getBoundingClientRect(),y=r.right-r.left,z=r.bottom-r.top,D=/left|right|inline/.test(B.cssFloat+B.display)||"flex"==C.display&&0===C["flex-direction"].indexOf("row"),E=d.offsetWidth>s.offsetWidth,G=d.offsetHeight>s.offsetHeight,H=(D?(a.clientX-r.left)/y:(a.clientY-r.top)/z)>.5,J=d.nextElementSibling,K=k(w,g,s,e,d,r);if(K!==!1){if(R=!0,setTimeout(m,30),b(o),1===K||K===-1)q=1===K;else if(D){var M=s.offsetTop,N=d.offsetTop;q=M===N?d.previousElementSibling===s&&!E||H&&E:N>M}else q=J!==s&&!G||H&&G;s.contains(g)||(q&&!J?g.appendChild(s):d.parentNode.insertBefore(s,q?J:d)),t=s.parentNode,this._animate(e,s),this._animate(r,d)}}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();h(b,"transition","none"),h(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,h(b,"transition","all "+c+"ms"),h(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){h(b,"transition",""),h(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;f(N,"touchmove",this._onTouchMove),f(a,"mouseup",this._onDrop),f(a,"touchend",this._onDrop),f(a,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(J.pid),clearTimeout(this._dragStartTimer),f(N,"mousemove",this._onTouchMove),this.nativeDraggable&&(f(N,"drop",this),f(c,"dragstart",this._onDragStart)),this._offUpEvents(),b&&(I&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation()),u&&u.parentNode.removeChild(u),s&&(this.nativeDraggable&&f(s,"dragend",this),l(s),g(s,this.options.ghostClass,!1),g(s,this.options.chosenClass,!1),w!==t?(E=p(s),E>=0&&(j(null,t,"sort",s,w,D,E),j(this,w,"sort",s,w,D,E),j(null,t,"add",s,w,D,E),j(this,w,"remove",s,w,D,E))):(v&&v.parentNode.removeChild(v),s.nextSibling!==x&&(E=p(s),E>=0&&(j(this,w,"update",s,w,D,E),j(this,w,"sort",s,w,D,E)))),a.active&&(null!==E&&E!==-1||(E=D),j(this,w,"end",s,w,D,E),this.save())),w=s=t=u=x=v=y=z=G=H=I=E=A=B=F=a.active=null)},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?s&&(this._onDragOver(a),d(a)):"drop"!==b&&"dragend"!==b||this._onDrop(a)},toArray:function(){for(var a,b=[],d=this.el.children,e=0,f=d.length,g=this.options;e<f;e++)a=d[e],c(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||o(a));return b},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,e){var f=d.children[e];c(f,this.options.draggable,d)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return c(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void("group"===a&&V(c)))},destroy:function(){var a=this.el;a[L]=null,f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),this.nativeDraggable&&(f(a,"dragover",this),f(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),T.splice(T.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},a.utils={on:e,off:f,css:h,find:i,is:function(a,b){return!!c(a,b,a)},extend:r,throttle:q,closest:c,toggleClass:g,index:p},a.create=function(b,c){return new a(b,c)},a.version="1.4.2",a}),function(a){"use strict";"function"==typeof define&&define.amd?define(["angular","./Sortable"],a):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?(require("angular"),a(angular,require("./Sortable")),module.exports="ng-sortable"):window.angular&&window.Sortable&&a(angular,Sortable)}(function(a,b){"use strict";var c="Sortable:ng-sortable";a.module("ng-sortable",[]).constant("ngSortableVersion","0.4.0").constant("ngSortableConfig",{}).directive("ngSortable",["$parse","ngSortableConfig",function(d,e){var f,g,h=function(a,b){var c=[].filter.call(a.childNodes,function(a){return 8===a.nodeType&&a.nodeValue.indexOf("ngRepeat:")!==-1})[0];if(!c)return function(){return null};c=c.nodeValue.match(/ngRepeat:\s*(?:\(.*?,\s*)?([^\s)]+)[\s)]+in\s+([^\s|]+)/);var e=d(c[2]);return function(){return e(b.$parent)||[]}};return{restrict:"AC",scope:{ngSortable:"=?"},link:function(d,i){function j(a,b){var c="on"+a.type.charAt(0).toUpperCase()+a.type.substr(1),d=p();n[c]&&n[c]({model:b||d[a.newIndex],models:d,oldIndex:a.oldIndex,newIndex:a.newIndex})}function k(e){var h=p();if(h){var i=e.oldIndex,j=e.newIndex;if(m!==e.from){var k=e.from[c]();f=k[i],e.clone?(f=a.copy(f),k.splice(b.utils.index(e.clone),0,k.splice(i,1)[0]),e.from.removeChild(e.clone)):k.splice(i,1),h.splice(j,0,f),e.from.insertBefore(e.item,g)}else h.splice(j,0,h.splice(i,1)[0]);d.$apply()}}var l,m=i[0],n=a.extend(d.ngSortable||{},e),o=[],p=h(m,d);m[c]=p,l=b.create(m,Object.keys(n).reduce(function(a,b){return a[b]=a[b]||n[b],a},{onStart:function(a){g=a.item.nextSibling,j(a),d.$apply()},onEnd:function(a){j(a,f),d.$apply()},onAdd:function(a){k(a),j(a,f),d.$apply()},onUpdate:function(a){k(a),j(a)},onRemove:function(a){j(a,f)},onSort:function(a){j(a)}})),i.on("$destroy",function(){a.forEach(o,function(a){a()}),l.destroy(),m[c]=null,m=null,o=null,l=null,g=null}),a.forEach(["sort","disabled","draggable","handle","animation","group","ghostClass","filter","onStart","onEnd","onAdd","onUpdate","onRemove","onSort"],function(a){o.push(d.$watch("ngSortable."+a,function(b){void 0!==b&&(n[a]=b,/^on[A-Z]/.test(a)||l.option(a,b))}))})}}}])}),function(a){function b(b){if("string"==typeof b.data&&(b.data={keys:b.data}),b.data&&b.data.keys&&"string"==typeof b.data.keys){var c=b.handler,d=b.data.keys.toLowerCase().split(" ");b.handler=function(b){if(this===b.target||!(/textarea|select/i.test(b.target.nodeName)||a.hotkeys.options.filterTextInputs&&a.inArray(b.target.type,a.hotkeys.textAcceptingInputTypes)>-1)){var e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g="",h={};a.each(["alt","ctrl","shift"],function(a,c){b[c+"Key"]&&e!==c&&(g+=c+"+")}),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(g+="meta+"),b.metaKey&&"meta"!==e&&g.indexOf("alt+ctrl+shift+")>-1&&(g=g.replace("alt+ctrl+shift+","hyper+")),e?h[g+e]=!0:(h[g+f]=!0,h[g+a.hotkeys.shiftNums[f]]=!0,"shift+"===g&&(h[a.hotkeys.shiftNums[f]]=!0));for(var i=0,j=d.length;i<j;i++)if(h[d[i]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],options:{filterTextInputs:!0}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery||this.jQuery||window.jQuery),function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||j.defaults,this.rules=k.normal,this.options.gfm&&(this.options.tables?this.rules=k.tables:this.rules=k.gfm)}function b(a,b){if(this.options=b||j.defaults,this.links=a,this.rules=l.normal,this.renderer=this.options.renderer||new c,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=l.breaks:this.rules=l.gfm:this.options.pedantic&&(this.rules=l.pedantic)}function c(a){this.options=a||{}}function d(a){this.tokens=[],this.token=null,this.options=a||j.defaults,this.options.renderer=this.options.renderer||new c,this.renderer=this.options.renderer,this.renderer.options=this.options}function e(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function f(a){return a.replace(/&([#\w]+);/g,function(a,b){return b=b.toLowerCase(),"colon"===b?":":"#"===b.charAt(0)?"x"===b.charAt(1)?String.fromCharCode(parseInt(b.substring(2),16)):String.fromCharCode(+b.substring(1)):""})}function g(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function h(){}function i(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function j(b,c,f){if(f||"function"==typeof c){f||(f=c,c=null),c=i({},j.defaults,c||{});var g,h,k=c.highlight,l=0;try{g=a.lex(b,c)}catch(m){return f(m)}h=g.length;var n=function(a){if(a)return c.highlight=k,f(a);var b;try{b=d.parse(g,c)}catch(e){a=e}return c.highlight=k,a?f(a):f(null,b)};if(!k||k.length<3)return n();if(delete c.highlight,!h)return n();for(;l<g.length;l++)!function(a){return"code"!==a.type?--h||n():k(a.text,a.lang,function(b,c){return b?n(b):null==c||c===a.text?--h||n():(a.text=c,a.escaped=!0,void(--h||n()))})}(g[l])}else try{return c&&(c=i({},j.defaults,c)),d.parse(a.lex(b,c),c)}catch(m){if(m.message+="\nPlease report this to https://github.com/chjj/marked.",(c||j.defaults).silent)return"<p>An error occured:</p><pre>"+e(m.message+"",!0)+"</pre>";throw m}}var k={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};k.bullet=/(?:[*+-]|\d+\.)/,k.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,k.item=g(k.item,"gm")(/bull/g,k.bullet)(),k.list=g(k.list)(/bull/g,k.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+k.def.source+")")(),k.blockquote=g(k.blockquote)("def",k.def)(),k._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",k.html=g(k.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,k._tag)(),k.paragraph=g(k.paragraph)("hr",k.hr)("heading",k.heading)("lheading",k.lheading)("blockquote",k.blockquote)("tag","<"+k._tag)("def",k.def)(),k.normal=i({},k),k.gfm=i({},k.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),k.gfm.paragraph=g(k.paragraph)("(?!","(?!"+k.gfm.fences.source.replace("\\1","\\2")+"|"+k.list.source.replace("\\1","\\3")+"|")(),k.tables=i({},k.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=k,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b,c){for(var d,e,f,g,h,i,j,l,m,a=a.replace(/^ +$/gm,"");a;)if((f=this.rules.newline.exec(a))&&(a=a.substring(f[0].length),f[0].length>1&&this.tokens.push({type:"space"})),f=this.rules.code.exec(a))a=a.substring(f[0].length),f=f[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?f:f.replace(/\n+$/,"")});else if(f=this.rules.fences.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"code",lang:f[2],text:f[3]||""});else if(f=this.rules.heading.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"heading",depth:f[1].length,text:f[2]});else if(b&&(f=this.rules.nptable.exec(a))){for(a=a.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/\n$/,"").split("\n")},l=0;l<i.align.length;l++)/^ *-+: *$/.test(i.align[l])?i.align[l]="right":/^ *:-+: *$/.test(i.align[l])?i.align[l]="center":/^ *:-+ *$/.test(i.align[l])?i.align[l]="left":i.align[l]=null;for(l=0;l<i.cells.length;l++)i.cells[l]=i.cells[l].split(/ *\| */);this.tokens.push(i)}else if(f=this.rules.lheading.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"heading",depth:"="===f[2]?1:2,text:f[1]});else if(f=this.rules.hr.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"hr"});else if(f=this.rules.blockquote.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"blockquote_start"}),f=f[0].replace(/^ *> ?/gm,""),this.token(f,b,!0),this.tokens.push({type:"blockquote_end"});else if(f=this.rules.list.exec(a)){for(a=a.substring(f[0].length),g=f[2],this.tokens.push({type:"list_start",ordered:g.length>1}),f=f[0].match(this.rules.item),d=!1,m=f.length,l=0;l<m;l++)i=f[l],j=i.length,i=i.replace(/^ *([*+-]|\d+\.) +/,""),~i.indexOf("\n ")&&(j-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&l!==m-1&&(h=k.bullet.exec(f[l+1])[0],g===h||g.length>1&&h.length>1||(a=f.slice(l+1).join("\n")+a,l=m-1)),e=d||/\n\n(?!\s*$)/.test(i),l!==m-1&&(d="\n"===i.charAt(i.length-1),e||(e=d)),this.tokens.push({type:e?"loose_item_start":"list_item_start"}),this.token(i,!1,c),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(f=this.rules.html.exec(a))a=a.substring(f[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===f[1]||"script"===f[1]||"style"===f[1]),text:f[0]});else if(!c&&b&&(f=this.rules.def.exec(a)))a=a.substring(f[0].length),this.tokens.links[f[1].toLowerCase()]={href:f[2],title:f[3]};else if(b&&(f=this.rules.table.exec(a))){for(a=a.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<i.align.length;l++)/^ *-+: *$/.test(i.align[l])?i.align[l]="right":/^ *:-+: *$/.test(i.align[l])?i.align[l]="center":/^ *:-+ *$/.test(i.align[l])?i.align[l]="left":i.align[l]=null;for(l=0;l<i.cells.length;l++)i.cells[l]=i.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(i)}else if(b&&(f=this.rules.paragraph.exec(a)))a=a.substring(f[0].length),this.tokens.push({type:"paragraph",text:"\n"===f[1].charAt(f[1].length-1)?f[1].slice(0,-1):f[1]});else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"text",text:f[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var l={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};l._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,l._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,l.link=g(l.link)("inside",l._inside)("href",l._href)(),l.reflink=g(l.reflink)("inside",l._inside)(),l.normal=i({},l),l.pedantic=i({},l.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),l.gfm=i({},l.normal,{escape:g(l.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:g(l.text)("]|","~]|")("|","|https?://|")()}),l.breaks=i({},l.gfm,{br:g(l.br)("{2,}","*")(),text:g(l.gfm.text)("{2,}","*")()}),b.rules=l,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,d,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1].charAt(6)?this.mangle(f[1].substring(7)):this.mangle(f[1]),d=this.mangle("mailto:")+c):(c=e(f[1]),d=c),g+=this.renderer.link(d,null,c);else if(this.inLink||!(f=this.rules.url.exec(a))){if(f=this.rules.tag.exec(a))!this.inLink&&/^<a /i.test(f[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(f[0])&&(this.inLink=!1),a=a.substring(f[0].length),g+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(f[0]):e(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),this.inLink=!0,g+=this.outputLink(f,{href:f[2],title:f[3]}),this.inLink=!1;else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0].charAt(0),a=f[0].substring(1)+a;continue}this.inLink=!0,g+=this.outputLink(f,b),this.inLink=!1}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+=this.renderer.strong(this.output(f[2]||f[1]));else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+=this.renderer.em(this.output(f[2]||f[1]));else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+=this.renderer.codespan(e(f[2],!0));else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+=this.renderer.br();else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+=this.renderer.del(this.output(f[1]));else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=this.renderer.text(e(this.smartypants(f[0])));else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}else a=a.substring(f[0].length),c=e(f[1]),d=c,g+=this.renderer.link(d,null,c);return g},b.prototype.outputLink=function(a,b){var c=e(b.href),d=b.title?e(b.title):null;return"!"!==a[0].charAt(0)?this.renderer.link(c,d,this.output(a[1])):this.renderer.image(c,d,e(a[1]))},b.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):a},b.prototype.mangle=function(a){if(!this.options.mangle)return a;for(var b,c="",d=a.length,e=0;e<d;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.prototype.code=function(a,b,c){if(this.options.highlight){var d=this.options.highlight(a,b);null!=d&&d!==a&&(c=!0,a=d)}return b?'<pre><code class="'+this.options.langPrefix+e(b,!0)+'">'+(c?a:e(a,!0))+"\n</code></pre>\n":"<pre><code>"+(c?a:e(a,!0))+"\n</code></pre>"},c.prototype.blockquote=function(a){return"<blockquote>\n"+a+"</blockquote>\n"},c.prototype.html=function(a){return a},c.prototype.heading=function(a,b,c){return"<h"+b+' id="'+this.options.headerPrefix+c.toLowerCase().replace(/[^\w]+/g,"-")+'">'+a+"</h"+b+">\n"},c.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},c.prototype.list=function(a,b){var c=b?"ol":"ul";return"<"+c+">\n"+a+"</"+c+">\n"},c.prototype.listitem=function(a){return"<li>"+a+"</li>\n"},c.prototype.paragraph=function(a){return"<p>"+a+"</p>\n"},c.prototype.table=function(a,b){return"<table>\n<thead>\n"+a+"</thead>\n<tbody>\n"+b+"</tbody>\n</table>\n"},c.prototype.tablerow=function(a){return"<tr>\n"+a+"</tr>\n"},c.prototype.tablecell=function(a,b){var c=b.header?"th":"td",d=b.align?"<"+c+' style="text-align:'+b.align+'">':"<"+c+">";return d+a+"</"+c+">\n"},c.prototype.strong=function(a){return"<strong>"+a+"</strong>"},c.prototype.em=function(a){return"<em>"+a+"</em>"},c.prototype.codespan=function(a){return"<code>"+a+"</code>"},c.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},c.prototype.del=function(a){return"<del>"+a+"</del>"},c.prototype.link=function(a,b,c){if(this.options.sanitize){try{var d=decodeURIComponent(f(a)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===d.indexOf("javascript:")||0===d.indexOf("vbscript:"))return""}var g='<a href="'+a+'"';return b&&(g+=' title="'+b+'"'),g+=">"+c+"</a>"},c.prototype.image=function(a,b,c){var d='<img src="'+a+'" alt="'+c+'"';return b&&(d+=' title="'+b+'"'),d+=this.options.xhtml?"/>":">"},c.prototype.text=function(a){return a},d.parse=function(a,b,c){var e=new d(b,c);return e.parse(a)},d.prototype.parse=function(a){this.inline=new b(a.links,this.options,this.renderer),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},d.prototype.next=function(){return this.token=this.tokens.pop()},d.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},d.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},d.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var a,b,c,d,e,f="",g="";for(c="",a=0;a<this.token.header.length;a++)d={header:!0,align:this.token.align[a]},c+=this.renderer.tablecell(this.inline.output(this.token.header[a]),{header:!0,align:this.token.align[a]});for(f+=this.renderer.tablerow(c),a=0;a<this.token.cells.length;a++){for(b=this.token.cells[a],c="",e=0;e<b.length;e++)c+=this.renderer.tablecell(this.inline.output(b[e]),{header:!1,align:this.token.align[e]});g+=this.renderer.tablerow(c)}return this.renderer.table(f,g);case"blockquote_start":for(var g="";"blockquote_end"!==this.next().type;)g+=this.tok();return this.renderer.blockquote(g);case"list_start":for(var g="",h=this.token.ordered;"list_end"!==this.next().type;)g+=this.tok();return this.renderer.list(g,h);case"list_item_start":for(var g="";"list_item_end"!==this.next().type;)g+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(g);case"loose_item_start":for(var g="";"list_item_end"!==this.next().type;)g+=this.tok();return this.renderer.listitem(g);case"html":var i=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(i);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));
case"text":return this.renderer.paragraph(this.parseText())}},h.exec=h,j.options=j.setOptions=function(a){return i(j.defaults,a),j},j.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new c,xhtml:!1},j.Parser=d,j.parser=d.parse,j.Renderer=c,j.Lexer=a,j.lexer=a.lex,j.InlineLexer=b,j.inlineLexer=b.output,j.parse=j,"undefined"!=typeof module&&"object"==typeof exports?module.exports=j:"function"==typeof define&&define.amd?define(function(){return j}):this.marked=j}.call(function(){return this||("undefined"!=typeof window?window:global)}()),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.toMarkdown=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return t.indexOf(a.nodeName.toLowerCase())!==-1}function e(a){return u.indexOf(a.nodeName.toLowerCase())!==-1}function f(a){var b=(new r).parseFromString(a,"text/html");return s(b.documentElement,d),b}function g(a){for(var b,c,d,e=[a],f=[];e.length>0;)for(b=e.shift(),f.push(b),c=b.childNodes,d=0;d<c.length;d++)1===c[d].nodeType&&e.push(c[d]);return f.shift(),f}function h(a){for(var b="",c=0;c<a.childNodes.length;c++)if(1===a.childNodes[c].nodeType)b+=a.childNodes[c]._replacement;else{if(3!==a.childNodes[c].nodeType)continue;b+=a.childNodes[c].data}return b}function i(a,b){return a.cloneNode(!1).outerHTML.replace("><",">"+b+"<")}function j(a,b){if("string"==typeof b)return b===a.nodeName.toLowerCase();if(Array.isArray(b))return b.indexOf(a.nodeName.toLowerCase())!==-1;if("function"==typeof b)return b.call(n,a);throw new TypeError("`filter` needs to be a string, array, or function")}function k(a,b){var c,e,f;return"left"===a?(c=b.previousSibling,e=/ $/):(c=b.nextSibling,e=/^ /),c&&(3===c.nodeType?f=e.test(c.nodeValue):1!==c.nodeType||d(c)||(f=e.test(c.textContent))),f}function l(a){var b="",c="";if(!d(a)){var e=/^[ \r\n\t]/.test(a.innerHTML),f=/[ \r\n\t]$/.test(a.innerHTML);e&&!k("left",a)&&(b=" "),f&&!k("right",a)&&(c=" ")}return{leading:b,trailing:c}}function m(a){var b,c=h(a);if(!e(a)&&!/A|TH|TD/.test(a.nodeName)&&/^\s*$/i.test(c))return void(a._replacement="");for(var d=0;d<o.length;d++){var f=o[d];if(j(a,f.filter)){if("function"!=typeof f.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var g=l(a);(g.leading||g.trailing)&&(c=c.trim()),b=g.leading+f.replacement.call(n,c,a)+g.trailing;break}}a._replacement=b}var n,o,p=a("./lib/md-converters"),q=a("./lib/gfm-converters"),r=a("./lib/html-parser"),s=a("collapse-whitespace"),t=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],u=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];n=function(a,b){if(b=b||{},"string"!=typeof a)throw new TypeError(a+" is not a string");a=a.replace(/(\d+)\. /g,"$1\\. ");var c,d=f(a).body,e=g(d);o=p.slice(0),b.gfm&&(o=q.concat(o)),b.converters&&(o=b.converters.concat(o));for(var i=e.length-1;i>=0;i--)m(e[i]);return c=h(d),c.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")},n.isBlock=d,n.isVoid=e,n.outer=i,b.exports=n},{"./lib/gfm-converters":2,"./lib/html-parser":3,"./lib/md-converters":4,"collapse-whitespace":7}],2:[function(a,b,c){"use strict";function d(a,b){var c=Array.prototype.indexOf.call(b.parentNode.childNodes,b),d=" ";return 0===c&&(d="| "),d+a+" |"}var e=/highlight highlight-(\S+)/;b.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(a){return"~~"+a+"~~"}},{filter:function(a){return"checkbox"===a.type&&"LI"===a.parentNode.nodeName},replacement:function(a,b){return(b.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(a,b){return d(a,b)}},{filter:"tr",replacement:function(a,b){var c="",e={left:":--",right:"--:",center:":-:"};if("THEAD"===b.parentNode.nodeName)for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f].attributes.align,h="---";g&&(h=e[g.value]||h),c+=d(h,b.childNodes[f])}return"\n"+a+(c?"\n"+c:"")}},{filter:"table",replacement:function(a){return"\n\n"+a+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(a){return a}},{filter:function(a){return"PRE"===a.nodeName&&a.firstChild&&"CODE"===a.firstChild.nodeName},replacement:function(a,b){return"\n\n```\n"+b.firstChild.textContent+"\n```\n\n"}},{filter:function(a){return"PRE"===a.nodeName&&"DIV"===a.parentNode.nodeName&&e.test(a.parentNode.className)},replacement:function(a,b){var c=b.parentNode.className.match(e)[1];return"\n\n```"+c+"\n"+b.textContent+"\n```\n\n"}},{filter:function(a){return"DIV"===a.nodeName&&e.test(a.className)},replacement:function(a){return"\n\n"+a+"\n\n"}}]},{}],3:[function(a,b,c){function d(){var a=g.DOMParser,b=!1;try{(new a).parseFromString("","text/html")&&(b=!0)}catch(c){}return b}function e(){var b=function(){};if("undefined"==typeof document){var c=a("jsdom");b.prototype.parseFromString=function(a){return c.jsdom(a,{features:{FetchExternalResources:[],ProcessExternalResources:!1}})}}else f()?b.prototype.parseFromString=function(a){var b=new window.ActiveXObject("htmlfile");return b.designMode="on",b.open(),b.write(a),b.close(),b}:b.prototype.parseFromString=function(a){var b=document.implementation.createHTMLDocument("");return b.open(),b.write(a),b.close(),b};return b}function f(){var a=!1;try{document.implementation.createHTMLDocument("").open()}catch(b){window.ActiveXObject&&(a=!0)}return a}var g="undefined"!=typeof window?window:this;b.exports=d()?g.DOMParser:e()},{jsdom:6}],4:[function(a,b,c){"use strict";b.exports=[{filter:"p",replacement:function(a){return"\n\n"+a+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(a,b){for(var c=b.nodeName.charAt(1),d="",e=0;e<c;e++)d+="#";return"\n\n"+d+" "+a+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(a){return"_"+a+"_"}},{filter:["strong","b"],replacement:function(a){return"**"+a+"**"}},{filter:function(a){var b=a.previousSibling||a.nextSibling,c="PRE"===a.parentNode.nodeName&&!b;return"CODE"===a.nodeName&&!c},replacement:function(a){return"`"+a+"`"}},{filter:function(a){return"A"===a.nodeName&&a.getAttribute("href")},replacement:function(a,b){var c=b.title?' "'+b.title+'"':"";return"["+a+"]("+b.getAttribute("href")+c+")"}},{filter:"img",replacement:function(a,b){var c=b.alt||"",d=b.getAttribute("src")||"",e=b.title||"",f=e?' "'+e+'"':"";return d?"!["+c+"]("+d+f+")":""}},{filter:function(a){return"PRE"===a.nodeName&&"CODE"===a.firstChild.nodeName},replacement:function(a,b){return"\n\n    "+b.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(a){return a=a.trim(),a=a.replace(/\n{3,}/g,"\n\n"),a=a.replace(/^/gm,"> "),"\n\n"+a+"\n\n"}},{filter:"li",replacement:function(a,b){a=a.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var c="*   ",d=b.parentNode,e=Array.prototype.indexOf.call(d.children,b)+1;return c=/ol/i.test(d.nodeName)?e+".  ":"*   ",c+a}},{filter:["ul","ol"],replacement:function(a,b){for(var c=[],d=0;d<b.childNodes.length;d++)c.push(b.childNodes[d]._replacement);return/li/i.test(b.parentNode.nodeName)?"\n"+c.join("\n"):"\n\n"+c.join("\n")+"\n\n"}},{filter:function(a){return this.isBlock(a)},replacement:function(a,b){return"\n\n"+this.outer(b,a)+"\n\n"}},{filter:function(){return!0},replacement:function(a,b){return this.outer(b,a)}}]},{}],5:[function(a,b,c){b.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],6:[function(a,b,c){},{}],7:[function(a,b,c){"use strict";function d(a){return!(!a||!j[a.nodeName])}function e(a){return!(!a||!i[a.nodeName])}function f(a,b){if(a.firstChild&&"PRE"!==a.nodeName){"function"!=typeof b&&(b=d);for(var c=null,f=!1,i=null,j=h(i,a);j!==a;){if(3===j.nodeType){var k=j.data.replace(/[ \r\n\t]+/g," ");if(c&&!/ $/.test(c.data)||f||" "!==k[0]||(k=k.substr(1)),!k){j=g(j);continue}j.data=k,c=j}else{if(1!==j.nodeType){j=g(j);continue}b(j)||"BR"===j.nodeName?(c&&(c.data=c.data.replace(/ $/,"")),c=null,f=!1):e(j)&&(c=null,f=!0)}var l=h(i,j);i=j,j=l}c&&(c.data=c.data.replace(/ $/,""),c.data||g(c))}}function g(a){var b=a.nextSibling||a.parentNode;return a.parentNode.removeChild(a),b}function h(a,b){return a&&a.parentNode===b||"PRE"===b.nodeName?b.nextSibling||b.parentNode:b.firstChild||b.nextSibling||b.parentNode}var i=a("void-elements");Object.keys(i).forEach(function(a){i[a.toUpperCase()]=1});var j={};a("block-elements").forEach(function(a){j[a.toUpperCase()]=1}),b.exports=f},{"block-elements":5,"void-elements":8}],8:[function(a,b,c){b.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},{}]},{},[1])(1)}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";var b=function(b,c){var d=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];a.each(d,function(d,e){"undefined"!=typeof a(b).data(e)&&(c="object"==typeof c?c:{},c[e]=a(b).data(e))}),this.$ns="bootstrap-markdown",this.$element=a(b),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=a.extend(!0,{},a.fn.markdown.defaults,c,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};b.prototype={constructor:b,__alterButtons:function(b,c){var d=this.$handler,e="all"==b,f=this;a.each(d,function(a,d){var g=!0;g=!e&&d.indexOf(b)<0,g===!1&&c(f.$editor.find('button[data-handler="'+d+'"]'))})},__buildButtons:function(b,c){var d,e=this.$ns,f=this.$handler,g=this.$callback;for(d=0;d<b.length;d++){var h,i=b[d];for(h=0;h<i.length;h++){var j,k=i[h].data,l=a("<div/>",{"class":"btn-group"});for(j=0;j<k.length;j++){var m,n,o=k[j],p=e+"-"+o.name,q=this.__getIcon(o.icon),r=o.btnText?o.btnText:"",s=o.btnClass?o.btnClass:"btn",t=o.tabIndex?o.tabIndex:"-1",u="undefined"!=typeof o.hotkey?o.hotkey:"",v="undefined"!=typeof jQuery.hotkeys&&""!==u?" ("+u+")":"";m=a("<button></button>"),m.text(" "+this.__localize(r)).addClass("btn-default btn-sm").addClass(s),s.match(/btn\-(primary|success|info|warning|danger|link)/)&&m.removeClass("btn-default"),m.attr({type:"button",title:this.__localize(o.title)+v,tabindex:t,"data-provider":e,"data-handler":p,"data-hotkey":u}),o.toggle===!0&&m.attr("data-toggle","button"),n=a("<span/>"),n.addClass(q),n.prependTo(m),l.append(m),f.push(p),g.push(o.callback)}c.append(l)}}return c},__setListener:function(){var b="undefined"!=typeof this.$textarea.attr("rows"),c=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",d=b?this.$textarea.attr("rows"):c;this.$textarea.attr("rows",d),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:a.proxy(this.focus,this),keyup:a.proxy(this.keyup,this),change:a.proxy(this.change,this),select:a.proxy(this.select,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",a.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",a.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(b){var c=a(b.currentTarget),d=this.$handler,e=this.$callback,f=c.attr("data-handler"),g=d.indexOf(f),h=e[g];a(b.currentTarget).focus(),h(this),this.change(this),f.indexOf("cmdSave")<0&&this.$textarea.focus(),b.preventDefault()},__localize:function(b){var c=a.fn.markdown.messages,d=this.$options.language;return"undefined"!=typeof c&&"undefined"!=typeof c[d]&&"undefined"!=typeof c[d][b]?c[d][b]:b},__getIcon:function(a){return"object"==typeof a?a[this.$options.iconlibrary]:a},setFullscreen:function(b){var c=this.$editor,d=this.$textarea;b===!0?(c.addClass("md-fullscreen-mode"),a("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(c.removeClass("md-fullscreen-mode"),a("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=b,d.focus()},showEditor:function(){var b,c=this,d=this.$ns,e=this.$element,f=(e.css("height"),e.css("width"),this.$editable),g=this.$handler,h=this.$callback,i=this.$options,j=a("<div/>",{"class":"md-editor",click:function(){c.focus()}});if(null===this.$editor){var k=a("<div/>",{"class":"md-header btn-toolbar"}),l=[];if(i.buttons.length>0&&(l=l.concat(i.buttons[0])),i.additionalButtons.length>0&&a.each(i.additionalButtons[0],function(b,c){var d=a.grep(l,function(a,b){return a.name===c.name});d.length>0?d[0].data=d[0].data.concat(c.data):l.push(i.additionalButtons[0][b])}),i.reorderButtonGroups.length>0&&(l=l.filter(function(a){return i.reorderButtonGroups.indexOf(a.name)>-1}).sort(function(a,b){return i.reorderButtonGroups.indexOf(a.name)<i.reorderButtonGroups.indexOf(b.name)?-1:i.reorderButtonGroups.indexOf(a.name)>i.reorderButtonGroups.indexOf(b.name)?1:0})),l.length>0&&(k=this.__buildButtons([l],k)),i.fullscreen.enable&&k.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(i.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(a){a.preventDefault(),c.setFullscreen(!0)}),j.append(k),e.is("textarea"))e.before(j),b=e,b.addClass("md-input"),j.append(b);else{var m="function"==typeof toMarkdown?toMarkdown(e.html()):e.html(),n=a.trim(m);b=a("<textarea/>",{"class":"md-input",val:n}),j.append(b),f.el=e,f.type=e.prop("tagName").toLowerCase(),f.content=e.html(),a(e[0].attributes).each(function(){f.attrKeys.push(this.nodeName),f.attrValues.push(this.nodeValue)}),e.replaceWith(j)}var o=a("<div/>",{"class":"md-footer"}),p=!1,q="";if(i.savable){p=!0;var r="cmdSave";g.push(r),h.push(i.onSave),o.append('<button class="btn btn-success" data-provider="'+d+'" data-handler="'+r+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(q="function"==typeof i.footer?i.footer(this):i.footer,""!==a.trim(q)&&(p=!0,o.append(q)),p&&j.append(o),i.width&&"inherit"!==i.width&&(jQuery.isNumeric(i.width)?(j.css("display","table"),b.css("width",i.width+"px")):j.addClass(i.width)),i.height&&"inherit"!==i.height)if(jQuery.isNumeric(i.height)){var s=i.height;k&&(s=Math.max(0,s-k.outerHeight())),o&&(s=Math.max(0,s-o.outerHeight())),b.css("height",s+"px")}else j.addClass(i.height);this.$editor=j,this.$textarea=b,this.$editable=f,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',a.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&k.find('[data-provider="bootstrap-markdown"]').each(function(){var c=a(this),d=c.attr("data-hotkey");""!==d.toLowerCase()&&b.bind("keydown",d,function(){return c.trigger("click"),!1})}),"preview"===i.initialstate?this.showPreview():"fullscreen"===i.initialstate&&i.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return i.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),i.fullscreen.enable&&i.fullscreen!==!1&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(i.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(a){a.preventDefault(),c.setFullscreen(!1)})),this.hideButtons(i.hiddenButtons),this.disableButtons(i.disabledButtons),i.onShow(this),this},parseContent:function(a){var b,a=a||this.$textarea.val();return b=this.$options.parser?this.$options.parser(a):"object"==typeof markdown?markdown.toHTML(a):"function"==typeof marked?marked(a):a},showPreview:function(){var b,c,d=this.$options,e=this.$textarea,f=e.next(),g=a("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),c=d.onPreview(this),b="string"==typeof c?c:this.parseContent(),g.html(b),f&&"md-footer"==f.attr("class")?g.insertBefore(f):e.parent().append(g),g.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px"}),this.$options.resize&&g.css("resize",this.$options.resize),e.hide(),g.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){this.$isPreview=!1;var a=this.$editor.find('div[data-provider="markdown-preview"]');return a.remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(a){return this.$textarea.val(a),this},findSelection:function(a){var b,c=this.getContent();if(b=c.indexOf(a),b>=0&&a.length>0){var d,e=this.getSelection();return this.setSelection(b,b+a.length),d=this.getSelection(),this.setSelection(e.start,e.end),d}return null},getSelection:function(){var a=this.$textarea[0];return("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||function(){return null})()},setSelection:function(a,b){var c=this.$textarea[0];return("selectionStart"in c&&function(){c.selectionStart=a,c.selectionEnd=b}||function(){return null})()},replaceSelection:function(a){var b=this.$textarea[0];return("selectionStart"in b&&function(){return b.value=b.value.substr(0,b.selectionStart)+a+b.value.substr(b.selectionEnd,b.value.length),b.selectionStart=b.value.length,this}||function(){return b.value+=a,jQuery(b)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var a,b=this.$nextTab.shift();return"function"==typeof b?a=b():"object"==typeof b&&b.length>0&&(a=b),a},setNextTab:function(a,b){if("string"==typeof a){var c=this;this.$nextTab.push(function(){return c.findSelection(a)})}else if("number"==typeof a&&"number"==typeof b){var d=this.getSelection();this.setSelection(a,b),this.$nextTab.push(this.getSelection()),this.setSelection(d.start,d.end)}},__parseButtonNameParam:function(a){return"string"==typeof a?a.split(" "):a},enableButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.removeAttr("disabled")})}),this},disableButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.attr("disabled","disabled")})}),this},hideButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.addClass("hidden")})}),this},showButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.removeClass("hidden")})}),this},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},keyup:function(a){var b=!1;switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var c;if(c=this.getNextTab(),null!==c){var d=this;setTimeout(function(){d.setSelection(c.start,c.end)},500),b=!0}else{var e=this.getSelection();e.start==e.end&&e.end==this.getContent().length?b=!1:(this.setSelection(this.getContent().length,this.getContent().length),b=!0)}break;case 13:b=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),b=!1;break;default:b=!1}b&&(a.stopPropagation(),a.preventDefault()),this.$options.onChange(this)},change:function(a){return this.$options.onChange(this),this},select:function(a){return this.$options.onSelect(this),this},focus:function(b){var c=this.$options,d=(c.hideable,this.$editor);return d.addClass("active"),a(document).find(".md-editor").each(function(){if(a(this).attr("id")!==d.attr("id")){var b;b=a(this).find("textarea").data("markdown"),null===b&&(b=a(this).find('div[data-provider="markdown-preview"]').data("markdown")),b&&b.blur()}}),c.onFocus(this),this},blur:function(b){var c=this.$options,d=c.hideable,e=this.$editor,f=this.$editable;if(e.hasClass("active")||0===this.$element.parent().length){if(e.removeClass("active"),d)if(null!==f.el){var g=a("<"+f.type+"/>"),h=this.getContent(),i=this.parseContent(h);a(f.attrKeys).each(function(a,b){g.attr(f.attrKeys[a],f.attrValues[a])}),g.html(i),e.replaceWith(g)}else e.hide();c.onBlur(this)}return this}};var c=a.fn.markdown;a.fn.markdown=function(c){return this.each(function(){var d=a(this),e=d.data("markdown"),f="object"==typeof c&&c;e||d.data("markdown",e=new b(this,f))})},a.fn.markdown.messages={},a.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("strong text"):d.text,"**"===e.substr(d.start-2,2)&&"**"===e.substr(d.end,2)?(a.setSelection(d.start-2,d.end+2),a.replaceSelection(b),c=d.start-2):(a.replaceSelection("**"+b+"**"),c=d.start+2),a.setSelection(c,c+b.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("emphasized text"):d.text,"_"===e.substr(d.start-1,1)&&"_"===e.substr(d.end,1)?(a.setSelection(d.start-1,d.end+1),a.replaceSelection(b),c=d.start-1):(a.replaceSelection("_"+b+"_"),c=d.start+1),a.setSelection(c,c+b.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(a){var b,c,d,e,f=a.getSelection(),g=a.getContent();b=0===f.length?a.__localize("heading text"):f.text+"\n",d=4,"### "===g.substr(f.start-d,d)||(d=3,"###"===g.substr(f.start-d,d))?(a.setSelection(f.start-d,f.end),a.replaceSelection(b),c=f.start-d):f.start>0&&(e=g.substr(f.start-1,1),!!e&&"\n"!=e)?(a.replaceSelection("\n\n### "+b),c=f.start+6):(a.replaceSelection("### "+b),c=f.start+4),a.setSelection(c,c+b.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(b){var c,d,e,f=b.getSelection();b.getContent();c=0===f.length?b.__localize("enter link description here"):f.text,e=prompt(b.__localize("Insert Hyperlink"),"http://");var g=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==e&&""!==e&&"http://"!==e&&g.test(e)){var h=a("<div>"+e+"</div>").text();b.replaceSelection("["+c+"]("+h+")"),d=f.start+1,b.setSelection(d,d+c.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(b){var c,d,e,f=b.getSelection();b.getContent();c=0===f.length?b.__localize("enter image description here"):f.text,e=prompt(b.__localize("Insert Image Hyperlink"),"http://");var g=new RegExp("^((http|https)://|(//))[a-z0-9]","i");if(null!==e&&""!==e&&"http://"!==e&&g.test(e)){var h=a("<div>"+e+"</div>").text();b.replaceSelection("!["+c+"]("+h+' "'+b.__localize("enter image title here")+'")'),d=f.start+2,b.setNextTab(b.__localize("enter image title here")),b.setSelection(d,d+c.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("list text here"),b.replaceSelection("- "+c),d=e.start+2;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("- "+c),d=e.start+2;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="- "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+4}b.setSelection(d,d+c.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("list text here"),b.replaceSelection("1. "+c),d=e.start+3;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("1. "+c),d=e.start+3;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="1. "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+5}b.setSelection(d,d+c.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("code text here"):d.text,"```\n"===e.substr(d.start-4,4)&&"\n```"===e.substr(d.end,4)?(a.setSelection(d.start-4,d.end+4),a.replaceSelection(b),c=d.start-4):"`"===e.substr(d.start-1,1)&&"`"===e.substr(d.end,1)?(a.setSelection(d.start-1,d.end+1),a.replaceSelection(b),c=d.start-1):e.indexOf("\n")>-1?(a.replaceSelection("```\n"+b+"\n```"),c=d.start+4):(a.replaceSelection("`"+b+"`"),c=d.start+1),a.setSelection(c,c+b.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("quote here"),b.replaceSelection("> "+c),d=e.start+2;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("> "+c),d=e.start+2;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="> "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+4}b.setSelection(d,d+c.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(a){var b=a.$isPreview;b===!1?a.showPreview():a.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(a){},onPreview:function(a){},onSave:function(a){},onBlur:function(a){},onFocus:function(a){},onChange:function(a){},onFullscreen:function(a){},onSelect:function(a){}},a.fn.markdown.Constructor=b,a.fn.markdown.noConflict=function(){return a.fn.markdown=c,this};var d=function(a){var b=a;return b.data("markdown")?void b.data("markdown").showEditor():void b.markdown()},e=function(b){var c=a(document.activeElement);a(document).find(".md-editor").each(function(){var b=a(this),d=c.closest(".md-editor")[0]===this,e=b.find("textarea").data("markdown")||b.find('div[data-provider="markdown-preview"]').data("markdown");e&&!d&&e.blur()})};a(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(b){d(a(this)),b.preventDefault()}).on("click focusin",function(a){e(a)}).ready(function(){a('textarea[data-provide="markdown"]').each(function(){d(a(this))})})}),function(a,b){"use strict";function c(){function c(a,b){var c,d={},e=a.split(",");for(c=0;c<e.length;c++)d[b?i(e[c]):e[c]]=!0;return d}function d(b,c){null===b||void 0===b?b="":"string"!=typeof b&&(b=""+b),s.innerHTML=b;var d=5;do{if(0===d)throw m("uinput","Failed to sanitize html because the input is unstable");d--,a.document.documentMode&&q(s),b=s.innerHTML,s.innerHTML=b}while(b!==s.innerHTML);for(var e=s.firstChild;e;){switch(e.nodeType){case 1:c.start(e.nodeName.toLowerCase(),n(e.attributes));break;case 3:c.chars(e.textContent)}var f;if(!(f=e.firstChild)&&(1==e.nodeType&&c.end(e.nodeName.toLowerCase()),f=e.nextSibling,!f))for(;null==f&&(e=e.parentNode,e!==s);)f=e.nextSibling,1==e.nodeType&&c.end(e.nodeName.toLowerCase());e=f}for(;e=s.firstChild;)s.removeChild(e)}function n(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c];b[e.name]=e.value}return b}function o(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(a,b){var c=!1,d=e(a,a.push);return{start:function(a,e){a=i(a),!c&&C[a]&&(c=a),c||D[a]!==!0||(d("<"),d(a),g(e,function(c,e){var f=i(e),g="img"===a&&"src"===f||"background"===f;H[f]!==!0||E[f]===!0&&!b(c,g)||(d(" "),d(e),d('="'),d(o(c)),d('"'))}),d(">"))},end:function(a){a=i(a),c||D[a]!==!0||v[a]===!0||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(o(a))}}}function q(b){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;d<e;d++){var f=c[d],g=f.name.toLowerCase();"xmlns:ns1"!==g&&0!==g.lastIndexOf("ns1:",0)||(b.removeAttributeNode(f),d--,e--)}var h=b.firstChild;h&&q(h),h=b.nextSibling,h&&q(h)}var r=!1;this.$get=["$$sanitizeUri",function(a){return r&&f(D,B),function(b){var c=[];return k(b,l(c,function(b,c){return!/^unsafe:/.test(a(b,c))})),c.join("")}}],this.enableSvg=function(a){return h(a)?(r=a,this):r},e=b.bind,f=b.extend,g=b.forEach,h=b.isDefined,i=b.lowercase,j=b.noop,k=d,l=p;var s,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~ |!])/g,v=c("area,br,col,hr,img,wbr"),w=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=c("rp,rt"),y=f({},x,w),z=f({},w,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),A=f({},x,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=c("script,style"),D=f({},v,z,A,y),E=c("background,cite,href,longdesc,src,xlink:href"),F=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),G=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),H=f({},E,G,F);
!function(a){var b;if(!a.document||!a.document.implementation)throw m("noinert","Can't create an inert html document");b=a.document.implementation.createHTMLDocument("inert");var c=b.documentElement||b.getDocumentElement(),d=c.getElementsByTagName("body");if(1===d.length)s=d[0];else{var e=b.createElement("html");s=b.createElement("body"),e.appendChild(s),b.appendChild(e)}}(a)}function d(a){var b=[],c=l(b,j);return c.chars(a),b.join("")}var e,f,g,h,i,j,k,l,m=b.$$minErr("$sanitize");b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isDefined,h=b.isFunction,i=b.isObject,j=b.isString;return function(b,k,l){function m(a){a&&t.push(d(a))}function n(a,b){var c,d=r(a);t.push("<a ");for(c in d)t.push(c+'="'+d[c]+'" ');!g(k)||"target"in d||t.push('target="',k,'" '),t.push('href="',a.replace(/"/g,"&quot;"),'">'),m(b),t.push("</a>")}if(null==b||""===b)return b;if(!j(b))throw f("notstring","Expected string but received: {0}",b);for(var o,p,q,r=h(l)?l:i(l)?function(){return l}:function(){return{}},s=b,t=[];o=s.match(c);)p=o[0],o[2]||o[4]||(p=(o[3]?"http://":"mailto:")+p),q=o.index,m(s.substr(0,q)),n(p,o[0].replace(e,"")),s=s.substring(q+o[0].length);return m(s),a(t.join(""))}}])}(window,window.angular),!function(a,b){var c=b.isDefined,d=b.isUndefined,e=b.isNumber,f=b.isObject,g=b.isArray,h=b.extend,i=b.toJson;b.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){return this.prefix=a,this},this.setStorageType=function(a){return this.storageType=a,this},this.setStorageCookie=function(a,b){return this.cookie.expiry=a,this.cookie.path=b,this},this.setStorageCookieDomain=function(a){return this.cookie.domain=a,this},this.setNotify=function(a,b){return this.notify={setItem:a,removeItem:b},this},this.$get=["$rootScope","$window","$document","$parse",function(a,b,j,k){var l,m=this,n=m.prefix,o=m.cookie,p=m.notify,q=m.storageType;j?j[0]&&(j=j[0]):j=document,"."!==n.substr(-1)&&(n=n?n+".":"");var r=function(a){return n+a},s=function(){try{var c=q in b&&null!==b[q],d=r("__"+Math.round(1e7*Math.random()));return c&&(l=b[q],l.setItem(d,""),l.removeItem(d)),c}catch(e){return q="cookie",a.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),t=function(b,c){if(c=d(c)?null:i(c),!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),z(b,c);try{l&&l.setItem(r(b),c),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:m.storageType})}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.message),z(b,c)}return!0},u=function(b){if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),A(b);var c=l?l.getItem(r(b)):null;if(!c||"null"===c)return null;try{return JSON.parse(c)}catch(d){return c}},v=function(){var b,c;for(b=0;b<arguments.length;b++)if(c=arguments[b],s&&"cookie"!==m.storageType)try{l.removeItem(r(c)),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:m.storageType})}catch(d){a.$broadcast("LocalStorageModule.notification.error",d.message),B(c)}else s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:"cookie"}),B(c)},w=function(){if(!s)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var b=n.length,c=[];for(var d in l)if(d.substr(0,b)===n)try{c.push(d.substr(b))}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return c},x=function(b){var c=n?new RegExp("^"+n):new RegExp,d=b?new RegExp(b):new RegExp;if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C();var e=n.length;for(var f in l)if(c.test(f)&&d.test(f.substr(e)))try{v(f.substr(e))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.message),C()}return!0},y=function(){try{return b.navigator.cookieEnabled||"cookie"in j&&(j.cookie.length>0||(j.cookie="test").indexOf.call(j.cookie,"test")>-1)}catch(c){return a.$broadcast("LocalStorageModule.notification.error",c.message),!1}}(),z=function(b,c,h){if(d(c))return!1;if((g(c)||f(c))&&(c=i(c)),!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var k="",l=new Date,m="";if(null===c?(l.setTime(l.getTime()+-864e5),k="; expires="+l.toGMTString(),c=""):e(h)&&0!==h?(l.setTime(l.getTime()+24*h*60*60*1e3),k="; expires="+l.toGMTString()):0!==o.expiry&&(l.setTime(l.getTime()+24*o.expiry*60*60*1e3),k="; expires="+l.toGMTString()),b){var n="; path="+o.path;o.domain&&(m="; domain="+o.domain),j.cookie=r(b)+"="+encodeURIComponent(c)+k+n+m}}catch(p){return a.$broadcast("LocalStorageModule.notification.error",p.message),!1}return!0},A=function(b){if(!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var c=j.cookie&&j.cookie.split(";")||[],d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(r(b)+"=")){var f=decodeURIComponent(e.substring(n.length+b.length+1,e.length));try{return JSON.parse(f)}catch(g){return f}}}return null},B=function(a){z(a,null)},C=function(){for(var a=null,b=n.length,c=j.cookie.split(";"),d=0;d<c.length;d++){for(a=c[d];" "===a.charAt(0);)a=a.substring(1,a.length);var e=a.substring(b,a.indexOf("="));B(e)}},D=function(){return q},E=function(a,b,d,e){e=e||b;var g=u(e);return null===g&&c(d)?g=d:f(g)&&f(d)&&(g=h(g,d)),k(b).assign(a,g),a.$watch(b,function(a){t(e,a)},f(a[b]))},F=function(){for(var a=0,c=b[q],d=0;d<c.length;d++)0===c.key(d).indexOf(n)&&a++;return a};return{isSupported:s,getStorageType:D,set:t,add:t,get:u,keys:w,remove:v,clearAll:x,bind:E,deriveKey:r,length:F,cookie:{isSupported:y,set:z,add:z,get:A,remove:B,clearAll:C}}}]})}(window,window.angular),function(a){"use strict";function b(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"../public/app/views/home.html",controller:"HomeController as homeCtrl"}).state("login",{url:"/login",templateUrl:"../public/app/views/login.html",controller:"LoginPageController as loginPageCtrl"}).state("logout",{url:"/logout",template:"",controller:["$state","$window","AuthService",function(a,b,c){c.logout().then(function(){a.go("login"),b.location.reload()})}]}).state("register",{url:"/register",templateUrl:"../public/app/views/register.html",controller:"RegisterController as registerCtrl"}).state("profile",{url:"/profile",templateUrl:"../public/app/views/profile.html",controller:"ProfileController as profileCtrl",data:{restrictions:{role:"editor"}}}).state("admin",{url:"/admin","abstract":!0,template:"<ui-view/>",data:{restrictions:{role:"admin"}}}).state("admin.user-form",{url:"/edit/:id",templateUrl:"../public/app/views/user-form.html",controller:"UserFormController as userFormCtrl"}).state("admin.users",{url:"/users",templateUrl:"../public/app/views/users.html",controller:"UsersController as usersCtrl"}).state("admin.roles",{url:"/roles",templateUrl:"../public/app/views/roles.html",controller:"RolesController as rolesCtrl"}).state("admin.permissions",{url:"/permissions",templateUrl:"../public/app/views/permissions.html",controller:"PermissionsController as permissionsCtrl"})}function c(a,b,c,d,e){var f;f=!1,a.$on("$stateChangeStart",function(a,g,h){return f||"login"===g.name?void(f=!1):(a.preventDefault(),void d.getUserStatus().then(function(a){return g.data=g.data||{},g.data.restrictions&&(g.data.restrictions=g.data.restrictions||{},!a.isLoggedIn||d.isAuthorized(g.data.restrictions.permission)===!1||d.isRole(g.data.restrictions.role)===!1)?(e.error("You are not authorized to view that page."),b.go("login",{},{reload:!0,notify:!1}),void c.location.reload()):(f=!0,void b.go(g,h))}))}),a.$on("$stateChangeSuccess",function(c,d,e,f,g){b.previous={name:f.name,params:g},a.$broadcast("ccAuthorizationSuccess")})}function d(a,b){var c;c=this,c.isLoggedIn=b.isLoggedIn,c.isAuthorized=b.isAuthorized,a.$on("ccAuthorizationSuccess",function(){c.isReady=!0})}b.$inject=["$stateProvider","$urlRouterProvider"],c.$inject=["$rootScope","$state","$window","AuthService","MessageService"],d.$inject=["$scope","AuthService"],a.module("capabilities-catalog",["sky","ui.router","capabilities-catalog.templates","ngSanitize"]).config(b).run(c).controller("AppController",d)}(window.angular),function(a){"use strict";function b(b,c,d){function e(e){var f,g,h;g=this,f={authorization:{"delete":{permission:null,message:"You do not have permission to delete that resource."},get:{permission:null,message:"You do not have permission to read that resource."},getAll:{permission:null,message:"You do not have permission to read those resources."},post:{permission:null,message:"You do not have permission to create that resource."},put:{permission:null,message:"You do not have permission to update that resource."}}},h=a.merge({},f,e),g.create=function(a){return d.isAuthorized(h.authorization.post.permission)?b.post("/api/"+h.endpointResourceName,a).then(function(a){return a.data}):c.reject(h.authorization.post.message)},g.deleteById=function(a){return d.isAuthorized(h.authorization["delete"].permission)?b["delete"]("/api/"+h.endpointResourceName+"/"+a).then(function(a){return a.data}):c.reject(h.authorization["delete"].message)},g.getAll=function(){return d.isAuthorized(h.authorization.getAll.permission)?b.get("/api/"+h.endpointResourceName).then(function(a){return a.data}):c.reject(h.authorization.getAll.message)},g.getById=function(a){return d.isAuthorized(h.authorization.get.permission)?b.get("/api/"+h.endpointResourceName+"/"+a).then(function(a){return a.data}):c.reject(h.authorization.get.message)},g.updateById=function(a,e){return d.isAuthorized(h.authorization.put.permission)?b.put("/api/"+h.endpointResourceName+"/"+a,e).then(function(a){return a.data}):c.reject(h.authorization.put.message)}}return this.instantiate=function(a){return new e(a)},this}b.$inject=["$http","$q","AuthService"],a.module("capabilities-catalog").factory("CrudFactory",b)}(window.angular),function(a){"use strict";function b(a,b){var c,d,e;c=!1,d=this,e=null,d.getUser=function(){return e},d.getUserStatus=function(){var d;return d=b.defer(),a.get("/api/user-status").then(function(a){c=a.data.status,e=a.data.user,d.resolve({isLoggedIn:c})})["catch"](function(a){c=!1,e=null,d.reject(a)}),d.promise},d.isLoggedIn=function(){return c},d.isAuthorized=function(a){return!a||null!==e&&("admin"===e.role||e.permissions.indexOf(a)>-1)},d.isRole=function(a){return!a||null!==e&&("admin"===e.role||e.role===a)},d.login=function(d,e){var f;return f=b.defer(),a.post("/api/login",{emailAddress:d,password:e}).then(function(a){c=!0,f.resolve(a.data)})["catch"](function(a){c=!1,f.reject(a)}),f.promise},d.logout=function(){var d;return d=b.defer(),a.get("/api/logout").then(function(a){c=!1,d.resolve(a.data)})["catch"](function(a){c=!0,d.reject(a.data)}),d.promise},d.register=function(b){return a.post("/api/register",b).then(function(a){return a.data})}}b.$inject=["$http","$q"],a.module("capabilities-catalog").service("AuthService",b)}(window.angular),function(a){"use strict";function b(b,c,d){function e(b){function e(a,b){h[a]=b}function f(){var b,c;b={};for(c in h)h.hasOwnProperty(c)&&i.indexOf(c)>-1&&(b[c]=a.copy(h[c]),delete h[c]);h.resolve={data:function(){return b}},d.open(h)}var g,h,i;return i=["icon","link","linkText","message","requestLogin"],g={templateUrl:"../public/app/components/toasts/toast.html",controller:"ToastMessageController as toastCtrl",requestLogin:!1},"object"!=typeof b&&(b={message:a.copy(b)}),h=a.merge({},g,b),h.requestLogin&&(h.link=function(){c.open({controller:"LoginModalController as contentCtrl",templateUrl:"../public/app/components/modals/login-modal.html"})},h.linkText="Please login"),{set:e,settings:h,showMessage:f}}var f;f=this,f.closeAll=function(){b(function(){a.element(".toast-close-button").trigger("click")})},f.info=function(a){var b;b=new e(a),b.set("toastType","info"),b.showMessage()},f.error=function(a){var b;b=new e(a),b.set("toastType","danger"),b.set("icon","fa-warning"),b.showMessage()},f.success=function(a){var b;b=new e(a),b.set("toastType","success"),b.set("icon","fa-check"),b.showMessage()},f.handleError=function(a){a&&("string"==typeof a?f.error(a):401===a.status?f.info({message:a.data.message,requestLogin:!0}):f.error({message:a.data.message}))},f.handleSuccess=function(a){"string"==typeof a?f.success(a):f.success({message:a.messageText||"Success!",link:a.link||"home",linkText:a.linkText||"Return home"})}}b.$inject=["$timeout","bbModal","bbToast"],a.module("capabilities-catalog").service("MessageService",b)}(window.angular),function(a){"use strict";function b(a){return a.instantiate({endpointResourceName:"permissions",authorization:{"delete":{permission:"DELETE_PERMISSION"},post:{permission:"CREATE_PERMISSION"},put:{permission:"UPDATE_PERMISSION"}}})}b.$inject=["CrudFactory"],a.module("capabilities-catalog").service("PermissionService",b)}(window.angular),function(a){"use strict";function b(a){return a.instantiate({endpointResourceName:"roles",authorization:{"delete":{permission:"DELETE_ROLE"},post:{permission:"CREATE_ROLE"},put:{permission:"UPDATE_ROLE"}}})}b.$inject=["CrudFactory"],a.module("capabilities-catalog").service("RoleService",b)}(window.angular),function(a){"use strict";function b(a){return a.instantiate({endpointResourceName:"users",authorization:{"delete":{permission:"DELETE_USER"},getAll:{permission:"GET_USERS"},post:{permission:"CREATE_USER"},put:{permission:"UPDATE_USER"}}})}b.$inject=["CrudFactory"],a.module("capabilities-catalog").service("UserService",b)}(window.angular),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"../public/app/components/back-to-top/back-to-top.html",replace:!0,scope:{duration:"@",offset:"@"},link:function(b,c){var d,e;d=parseInt(b.duration)||500,e=parseInt(b.offset)||200,angular.element(a).bind("scroll",function(){a.pageYOffset>e?c.fadeIn(d):c.fadeOut(d)}),b.backToTop=function(){return event.preventDefault(),$("html, body").animate({scrollTop:0},d),!1}}}}a.$inject=["$window"],angular.module("capabilities-catalog").directive("ccBackToTop",a)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",replace:!0,scope:!0,bindToController:{},controller:"BreadcrumbsController as breadcrumbsCtrl",templateUrl:"../public/app/components/breadcrumbs/breadcrumbs.html"}}function c(a,b){var c;c=this,c.breadcrumbs=b.getBreadcrumbs(),a.$on("breadcrumbs:updated",function(){c.breadcrumbs=b.getBreadcrumbs()})}c.$inject=["$scope","BreadcrumbsService"],a.module("capabilities-catalog").controller("BreadcrumbsController",c).directive("ccBreadcrumbs",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",controller:"CapabilityListController as listCtrl",templateUrl:"../public/app/components/capability-list/capability-list.html",scope:{items:"=",hideHeadings:"="}}}function c(){return{restrict:"E",scope:!0,controller:"CapabilityListController as listCtrl",templateUrl:"../public/app/components/capability-table/capability-table.html"}}function d(a,b){var c;c=this,c.isAuthorized=b.isAuthorized,c.isAuthenticated=b.isAuthenticated,c.isDraggable=b.isAuthorized("EDIT_CAPABILITY:FULL"),c["goto"]=function(b,c,d){d.preventDefault(),d.stopPropagation(),a.go(b,c)}}d.$inject=["$state","SessionService"],a.module("capabilities-catalog").controller("CapabilityListController",d).directive("ccCapabilityList",b).directive("ccCapabilityTable",c)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",scope:!0,bindToController:{model:"=",title:"=",totals:"="},controller:["bbModal",function(a){var b;b=this,b.openModal=function(){a.open({resolve:{data:{model:b.model,title:b.title}},controller:["data",function(a){this.title=a.title,this.model=a.model}],controllerAs:"modalCtrl",templateUrl:"../public/app/components/modals/chart-modal.html"})}}],controllerAs:"chartCtrl",templateUrl:"../public/app/components/chart/chart.html"}}a.module("capabilities-catalog").directive("ccChart",b)}(window.angular),function(a,b){"use strict";function c(){return{link:function(b,c,d){var e,f;f=d.ccConfirmClick||"Are you sure?",e=d.confirmedClick,c.bind("click",function(){a.confirm(f)&&b.$eval(e)})}}}b.module("capabilities-catalog").directive("ccConfirmClick",c)}(window,window.angular),function(a){"use strict";function b(b){return{restrict:"A",link:function(c,d){b(function(){function b(){var a,b,d;for(b=0,d=0;d<e;++d)c[d].style.height="auto";for(d=0;d<e;++d)a=c[d].offsetHeight,b=a>b?a:b;for(d=0;d<e;++d)c[d].style.height=b+"px"}var c,e;c=d[0].querySelectorAll(".equal-height-item"),e=c.length,b(),a.element(window).bind("resize",b)})}}}b.$inject=["$timeout"],a.module("capabilities-catalog").directive("ccEqualHeight",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"A",require:"ngModel",scope:{originalValue:"=ccConfirmPassphrase"},link:function(a,b,c,d){d.$validators.ccConfirmPassphrase=function(b){return b===a.originalValue},a.$watch("originalValue",function(){d.$validate()}),a.$watch(d,function(){d.$validate()})}}}b.$inject=["$window"],a.module("capabilities-catalog").directive("ccConfirmPassphrase",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",scope:!0,bindToController:{onSuccess:"="},controller:"LoginFormController as formCtrl",templateUrl:"../public/app/components/forms/login/login-form.html"}}function c(a,b){var c;c=this,c.submit=function(){a.login(c.formData.emailAddress,c.formData.password).then(function(){c.onSuccess&&c.onSuccess.call()})["catch"](b.handleError)}}c.$inject=["AuthService","MessageService"],a.module("capabilities-catalog").controller("LoginFormController",c).directive("ccLoginForm",b)}(window.angular),function(a){"use strict";function b(b,c,d,e){var f;f=this,f.login=function(){d(function(){a.element(document.querySelector("#form-login")).triggerHandler("submit")},100)},f.onSuccess=function(){c.$dismiss("success"),b.$broadcast("modalLoginSuccess"),e.closeAll(),e.success("Log in successful!")}}b.$inject=["$rootScope","$scope","$timeout","MessageService"],a.module("capabilities-catalog").controller("LoginModalController",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"E",controller:"ProductListController as listCtrl",templateUrl:"../public/app/components/product-list/product-list.html",scope:{items:"=",hideHeadings:"="}}}function c(){return{restrict:"E",scope:!0,controller:"ProductListController as listCtrl",templateUrl:"../public/app/components/product-table/product-table.html"}}function d(a,b){var c;c=this,c.isAuthorized=b.isAuthorized,c.isAuthenticated=b.isAuthenticated,c["goto"]=function(b,c,d){d.preventDefault(),d.stopPropagation(),a.go(b,c)}}d.$inject=["$state","SessionService"],a.module("capabilities-catalog").controller("ProductListController",d).directive("ccProductList",b).directive("ccProductTable",c)}(window.angular),function(){"use strict";function a(a){return{restrict:"A",scope:{},link:function(b,c){a.$on("$stateChangeSuccess",function(a,b,d,e){e.name!==b.name&&(c.removeClass("page-"+e.name),c.addClass("page-"+b.name))})}}}a.$inject=["$rootScope"],angular.module("capabilities-catalog").directive("routeCssClassname",a)}(),function(a){"use strict";function b(){return{restrict:"E",templateUrl:"../public/app/components/sortable-table/sortable-table.html",scope:!0,bindToController:{model:"=",columns:"="},controller:"SortableTableController as sortableCtrl"}}function c(){var a;a=this,a.ascending=!0,a.isActiveColumn=function(b){return b.model&&a.orderBy===b.model},a.isOrderable=function(a){return!!a.name&&a.isOrderable!==!1},a.parseModelFromString=function(a,b){var c,d;return d=[],b?b.indexOf(".")>-1?(b.split(".").forEach(function(b){c=d[b],c||(d=a[b])}),c):a[b]:null},a.setOrderBy=function(b){a.orderBy===b&&a.toggleDirection(),a.orderBy=b},a.toggleDirection=function(){a.ascending=!a.ascending}}a.module("capabilities-catalog").controller("SortableTableController",c).directive("ccSortableTable",b)}(window.angular),function(){"use strict";function a(a,b){var c;switch(c=this,c.linkText=b.linkText||!1,c.icon=b.icon||!1,c.requestLogin=b.requestLogin||!1,typeof b.link){case"function":c.action=b.link;break;case"string":c.action=function(){a.go(b.link)};break;default:c.action=function(){}}b.message?c.messageText=b.message:c.messageText="There was a problem. Please try again."}a.$inject=["$state","data"],angular.module("capabilities-catalog").controller("ToastMessageController",a)}(),function(a){"use strict";function b(){}a.module("capabilities-catalog").controller("HomeController",b)}(window.angular),function(a){"use strict";function b(a,b){var c;c=this,c.redirect=function(){var c,d;d=a.previous.name,c=a.previous.params,d&&"login"!==d||(d="home",c={}),a.go(d,c,{reload:!0,notify:!1}),b.location.reload(!0)}}b.$inject=["$state","$window"],a.module("capabilities-catalog").controller("LoginPageController",b)}(window.angular),function(a){"use strict";function b(a,b){var c;c=this,c.formData={},b.getAll().then(function(a){c.permissions=a.value}),c.submit=function(){b.create(c.formData).then(function(b){c.permissions.unshift(b),c.formData={},a.handleSuccess("Permission successfully created.")})["catch"](a.handleError)},c["delete"]=function(d){b.deleteById(c.permissions[d]._id).then(function(){c.permissions.splice(d,1),a.handleSuccess("Permission successfully deleted.")})["catch"](a.handleError)},c.update=function(c){delete c.showEditor,b.updateById(c._id,c).then(function(b){c=b,a.handleSuccess("Permission successfully updated.")})["catch"](a.handleError)}}b.$inject=["MessageService","PermissionService"],a.module("capabilities-catalog").controller("PermissionsController",b)}(window.angular),function(a){"use strict";function b(a){var b;b=this,b.user=a.getUser()}b.$inject=["AuthService"],a.module("capabilities-catalog").controller("ProfileController",b)}(window.angular),function(a){"use strict";function b(a,b,c){var d;d=this,d.formData={},d.submit=function(){b.register(d.formData).then(function(){a.go("login")})["catch"](c.handleError)}}b.$inject=["$state","AuthService","MessageService"],a.module("capabilities-catalog").controller("RegisterController",b)}(window.angular),function(a){"use strict";function b(a,b,c){var d;d=this,d.formData={},b.getAll().then(function(a){d.permissions=a.value,c.getAll().then(function(a){d.roles=a.value})}),d.createRole=function(){c.create(d.formData).then(function(a){d.roles.unshift(a),d.formData={}})["catch"](a.handleError)},d["delete"]=function(b){c.deleteById(d.roles[b]._id).then(function(){d.roles.splice(b,1)})["catch"](a.handleError)},d.updateDefaultRole=function(a){d.roles.forEach(function(b,c){b.isDefault=c===a,d.updateRole(b)})},d.updateRole=function(b){delete b.showEditor,c.updateById(b._id,b).then(function(a){b=a})["catch"](a.handleError)},d.toggleSelection=function(a,b){var c=a._permissions.indexOf(b);c>-1?a._permissions.splice(c,1):a._permissions.push(b)}}b.$inject=["MessageService","PermissionService","RoleService"],a.module("capabilities-catalog").controller("RolesController",b)}(window.angular),function(a){"use strict";function b(a,b,c,d,e,f,g){function h(a){i.formData._id?e.handleSuccess({messageText:"User successfully updated.",link:"admin.users",linkText:"View all"}):e.handleSuccess({messageText:"User successfully created.",link:"admin.users",linkText:"View all"}),i.formData=a}var i;i=this,i.isAuthorized=d.isAuthorized,i["delete"]=function(){g.deleteById(c.params.id).then(function(){c.go("admin.users",{},{reload:!0}),e.handleSuccess("User deleted!")})["catch"](e.handleError)},i.requestReset=function(){i.waiting=!0,g.requestReset(i.formData).then(h)["catch"](e.handleError)},i.isSelected=function(a){return!i.formData||i.formData._role===a._id||a.isDefault===!0},i.submit=function(){i.formData._id?g.updateById(c.params.id,i.formData).then(h)["catch"](e.handleError):g.create(i.formData).then(h)["catch"](e.handleError)},f.getAll().then(function(a){return i.roles=a.value,g.getById(c.params.id)}).then(function(a){i.formData=a})["catch"](e.handleError)}b.$inject=["$q","$scope","$state","AuthService","MessageService","RoleService","UserService"],a.module("capabilities-catalog").controller("UserFormController",b)}(window.angular),function(a){"use strict";function b(a,b,c){var d;d=this,d.sortableTable={columns:[{name:"Email Address",model:"emailAddress"},{name:"Role",model:"_role.name"},{name:"",button:{action:function(b){a.go("admin.user-form",{id:b._id})},label:'<i class="fa fa-pencil"></i>Edit'}}]},c.getAll().then(function(a){d.users=a.value})["catch"](b.handleError)}b.$inject=["$state","MessageService","UserService"],a.module("capabilities-catalog").controller("UsersController",b)}(window.angular),angular.module("capabilities-catalog.templates",[]).run(["$templateCache",function(a){a.put("../public/app/views/home.html","Home"),a.put("../public/app/views/login.html","<h1>Content Editor Login</h1><cc-login-form on-success=loginPageCtrl.redirect></cc-login-form>"),a.put("../public/app/views/permissions.html",'<h1>Permissions</h1><table class="table table-striped"><tr><td><form class="form form-inline" ng-submit=permissionsCtrl.submit()><div class=form-group><input class=form-control id=field-permission placeholder=MY_PERMISSION ng-model=permissionsCtrl.formData.name> <button type=submit class="btn btn-default">Create</button></div></form></td><td></td><td></td></tr><tr><th>Name</th><th>ID</th><th></th></tr><tr ng-repeat="permission in permissionsCtrl.permissions | orderBy:\'name\':false track by $index"><td><form ng-if=permission.showEditor ng-submit=permissionsCtrl.update(permission)><div class=form-group><input ng-model=permission.name class=form-control></div><button type=submit class="btn btn-primary btn-xs">Update</button> <button type=button class="btn btn-default btn-xs" ng-click="permission.showEditor=false">Cancel</button></form><span ng-if=!permission.showEditor ng-click="permission.showEditor=true"><i class="fa fa-fw fa-pencil"></i> <span ng-bind=permission.name></span></span></td><td ng-bind=permission._id></td><td><button class="btn btn-xs btn-default" ng-click=permissionsCtrl.delete($index)><i class="fa fa-trash"></i>Delete</button></td></tr></table>'),a.put("../public/app/views/profile.html",'<h1>My Profile</h1><table class="table table-striped"><tr><td style=width:25%>Email Address</td><td><i class="fa fa-fw fa-envelope"></i> <span ng-bind=profileCtrl.user.emailAddress></span></td></tr><tr><td>ID</td><td><i class="fa fa-fw fa-user"></i> <span ng-bind=profileCtrl.user._id></span></td></tr><tr><td>Role</td><td><i class="fa fa-fw fa-certificate"></i> <span ng-bind=profileCtrl.user.role></span></td></tr></table>'),a.put("../public/app/views/register.html",'<h1>Register</h1><form class=form ng-submit=registerCtrl.submit()><div class=form-group><label for=field-email-address>Email address</label><input type=email class=form-control id=field-email-address ng-model=registerCtrl.formData.emailAddress></div><div class=form-group><label for=field-password>Password</label><input type=password class=form-control id=field-password ng-model=registerCtrl.formData.password></div><div class=form-group><button type=submit class="btn btn-primary">Register</button></div></form>'),a.put("../public/app/views/roles.html",'<h1>Roles</h1><table class="table table-striped"><tr><td><form class="form form-inline" ng-submit=rolesCtrl.createRole()><div class=form-group><input class=form-control id=field-role placeholder="e.g. admin" ng-model=rolesCtrl.formData.name> <button type=submit class="btn btn-default">Create</button></div></form></td><td></td><td></td><td></td></tr><tr><th>Name</th><th>Permissions</th><th></th><th></th></tr><tr ng-repeat="role in rolesCtrl.roles"><td><form ng-if=role.showEditor ng-submit=rolesCtrl.updateRole(role)><div class=form-group><input ng-model=role.name class=form-control></div><button type=submit class="btn btn-primary btn-xs">Update</button> <button type=button class="btn btn-default btn-xs" ng-click="role.showEditor=false">Cancel</button></form><span ng-if=!role.showEditor ng-click="role.showEditor=true"><i class="fa fa-fw fa-pencil"></i> <span ng-bind=role.name></span></span></td><td><form ng-submit=rolesCtrl.updateRole(role)><div class=checkbox ng-repeat="permission in rolesCtrl.permissions"><label><input type=checkbox ng-checked="role._permissions.indexOf(permission._id) > -1" ng-click="rolesCtrl.toggleSelection(role, permission._id)"><span ng-bind=permission.name></span></label></div><div class=form-group><button type=submit class="btn btn-xs btn-primary">Update Permissions</button></div></form></td><td><label><input ng-disabled="role.name === \'admin\'" type=checkbox ng-checked=role.isDefault ng-click=rolesCtrl.updateDefaultRole($index)> Default</label></td><td><button class="btn btn-xs btn-default" ng-click=rolesCtrl.delete($index)><i class="fa fa-trash"></i>Delete</button></td></tr></table>'),a.put("../public/app/views/user-form.html",'<div class=page-header><h1 ng-if=userFormCtrl.formData._id>Edit User</h1><h1 ng-if=!userFormCtrl.formData._id>New User Registration</h1></div><form name=register-form id=form-login class=form-horizontal ng-submit=userFormCtrl.submit() method=post validate><div class="col-md-9 col-sm-10 form-group tab-pane"><div class=form-group ng-class="{\'has-error\': register-form.emailAddress.$touched && register-form.emailAddress.$invalid}"><label class="col-md-3 col-sm-2 control-label">Email Address:</label><div class="col-md-9 col-sm-10"><input class=form-control autocomplete=off type=email name=registerEmailAddress ng-model=userFormCtrl.formData.emailAddress placeholder=(required) required><div ng-show=register-form.$error.email class=help-block>Valid email address is required.</div></div></div><div class=form-group><label class="col-md-3 col-sm-2 control-label">Role:</label><div class="col-md-9 col-sm-10"><select class=form-control name=roleModel ng-model=userFormCtrl.formData._role required><option value="">--- Select ---</option><option ng-repeat="role in userFormCtrl.roles track by $index" value="{{ role._id }}" ng-selected=::userFormCtrl.isSelected(role)>{{ role.name }}</option></select><div ng-show=register-form.roleModel.$error.required class=help-block>Valid user role selection required.</div></div></div></div><div class="col-md-3 col-sm-2 form-group"><button ng-if=userFormCtrl.formData._id class="btn btn-primary btn-block" type=submit ng-disabled="register-form.$invalid || userFormCtrl.waiting"><i class="fa fa-save"></i>Save</button> <button ng-if=!userFormCtrl.formData._id class="btn btn-primary btn-block" type=submit ng-disabled="register-form.$invalid || userFormCtrl.waiting"><i class="fa fa-plus"></i>Create</button> <button ng-if="::userFormCtrl.formData._id && appCtrl.isAuthorized(\'DELETE_ADOPTION_STATUS\')" class="btn btn-danger btn-block" type=button cc-confirm-click="Are you sure you want to DELETE {{userFormCtrl.formData.emailAddress}}" data-confirmed-click=userFormCtrl.delete()><i class="fa fa-trash"></i>Delete</button></div><div class="col-md-3 col-sm-2 form-group"><button ng-if=userFormCtrl.formData._id class="btn btn-default btn-block" type=button ng-click=userFormCtrl.requestReset() ng-disabled=userFormCtrl.waiting cc-confirm-click="Are you sure you want to request a passphrase reset for {{userFormCtrl.formData.emailAddress}}?"><i class="fa fa-refresh" aria-hidden=true></i>Reset Passphrase</button></div></form>'),
a.put("../public/app/views/users.html",'<div class=page-header><div class=controls><a class="btn btn-default" ng-if="appCtrl.isAuthorized(\'CREATE_USER\')" ui-sref="admin.user-form({ id: null })" href><i class="fa fa-plus"></i>Add new user</a></div><h1 class=bb-page-heading>Users</h1></div><cc-sortable-table model=usersCtrl.users columns=usersCtrl.sortableTable.columns></cc-sortable-table>'),a.put("../public/app/components/back-to-top/back-to-top.html",'<div class=back-to-top ng-click=backToTop()><i class="fa fa-angle-double-up"></i></div>'),a.put("../public/app/components/breadcrumbs/breadcrumbs.html",'<div id=wrap-breadcrumbs ng-if="breadcrumbsCtrl.breadcrumbs.length > 0"><div class=container><ul class=breadcrumb><li><a href ui-sref=home>Home</a></li><li ng-repeat="breadcrumb in ::breadcrumbsCtrl.breadcrumbs track by $index"><span ng-if=$last>{{:: breadcrumb.name }}</span><a ng-if=!$last ng-href="{{:: breadcrumb.href }}">{{:: breadcrumb.name }}</a></li></ul></div></div>'),a.put("../public/app/components/capability-list/capability-list.html",'<div class="section section-warning" id=section-services><div class=container><header><h2>Services</h2><p class=controls ng-if="::listCtrl.isAuthorized(\'CREATE_CAPABILITY_GROUP\')"><a class="btn btn-default btn-sm" href ui-sref=capability-group-form><i class="fa fa-plus"></i>Add Service Group</a></p></header><div class=section-body ng-repeat="capabilityGroup in items track by capabilityGroup._id" ng-if="capabilityGroup.value.length || (listCtrl.isAuthorized(\'CREATE_PRODUCT\') && !hideHeadings)"><header><h3 ng-bind=::capabilityGroup.name></h3><p class=controls ng-if="::listCtrl.isAuthorized(\'CREATE_CAPABILITY\')"><a class="btn btn-default btn-sm" href ng-if="::listCtrl.isAuthorized(\'EDIT_CAPABILITY_GROUP\') && capabilityGroup._id" ui-sref="capability-group-form(::{ groupId: capabilityGroup._id })"><i class="fa fa-pencil"></i>Edit Group</a> <a class="btn btn-default btn-sm" href ui-sref="capability-form({ groupId: capabilityGroup._id })"><i class="fa fa-plus"></i>Add Service</a></p></header><ul class="meter-list row" ng-sortable=capabilityGroup.sortConfig><li class="meter-list-item col-lg-4 col-md-6 col-sm-6" ng-class="::{ draggable: listCtrl.isDraggable }" ng-repeat="capability in capabilityGroup.value track by capability._id"><div class=featurette><a class=featurette-body href ui-sref="capability(::{ capabilitySlug: capability.slug })"><div class=media><div class=media-left><i class="media-object fa fa-fw {{::capability.icon}}"></i></div><div class=media-body><h4 class=featurette-title><span ng-bind=::capability.shortname></span> <span ng-if=capability.nicknames.length class="featurette-subtitle element-list">(<span class=element-list-item ng-repeat="nickname in ::capability.nicknames track by $index" ng-bind=::nickname></span>)</span></h4><span class=stats><span class=stat ng-bind=::capability.developmentState></span> <span class=stat ng-bind=::capability.capabilityType></span> <span class=stat ng-bind="::capability.adopters.length + \'&nbsp;adopters\'"></span> <span ng-if=capability.lastUpdated class=stat ng-bind=::capability.lastUpdated.formatted.friendly></span></span><div class=controls ng-if="::listCtrl.isAuthorized(\'EDIT_CAPABILITY:PARTIAL\')"><button class="btn btn-xs btn-link" ng-click="listCtrl.goto(\'capability-form\', { capabilityId: capability._id }, $event)"><i class="fa fa-pencil"></i></button></div></div></div></a><div class=featurette-footer><cc-chart model=capability.adopters totals=capability.totals data-title="::capability.name + \' Adopters\'"></cc-chart></div></div></li></ul></div></div></div>'),a.put("../public/app/components/capability-table/capability-table.html",'<div class="section section-warning capabilities-catalog" id=section-services><div class=container><header><h2>Services</h2><p class=controls ng-if="::appCtrl.isAuthorized(\'CREATE_CAPABILITY_GROUP\')"><a class="btn btn-default btn-sm" href ui-sref=capability-group-form><i class="fa fa-plus"></i>Add Service Group</a></p></header><ul class="table-list capability-list"><li class=table-list-item ng-repeat="capabilityGroup in ::listCtrl.capabilities track by capabilityGroup._id" ng-if="::capabilityGroup.capabilities.length || appCtrl.isAuthorized(\'CREATE_PRODUCT\')"><div class=table-list-heading><h3 ng-bind=::capabilityGroup.name></h3><p class=controls ng-if="::appCtrl.isAuthorized(\'CREATE_CAPABILITY\')"><a class="btn btn-default btn-sm" href ng-if="::appCtrl.isAuthorized(\'EDIT_CAPABILITY_GROUP\') && capabilityGroup._id" ui-sref="capability-group-form(::{ groupId: capabilityGroup._id })"><i class="fa fa-pencil"></i>Edit Group</a> <a class="btn btn-default btn-sm" href ui-sref="capability-form({ groupId: capabilityGroup._id })"><i class="fa fa-plus"></i>Add Service</a></p></div><div class=table-responsive><table class="table table-striped"><thead><tr><th class=name>Capability Name</th><th>Type</th><th>State</th><th class=stats>Products Adopting Capability</th><th ng-if="::appCtrl.isAuthorized(\'EDIT_CAPABILITY:PARTIAL\')"></th></tr></thead><tbody ng-sortable=capabilityGroup.sortConfig><tr ng-class="::{ draggable: appCtrl.isAuthorized(\'EDIT_CAPABILITY:FULL\') && capabilityGroup._id }" ng-repeat="capability in capabilityGroup.capabilities track by $index"><td class=name><a class=media href ui-sref="capability(::{ capabilitySlug: capability.slug })"><div class=media-left><i class="fa fa-fw {{::capability.icon}}"></i></div><div class=media-body><h4 ng-bind=::capability.shortname></h4><span class=element-list ng-if=::capability.nicknames.length>(<span class=element-list-item ng-repeat="nickname in ::capability.nicknames track by $index" ng-bind=::nickname></span>)&nbsp;</span></div></a></td><td ng-bind=::capability.capabilityType></td><td ng-bind=::capability.developmentState></td><td class=stats><cc-chart model=capability.adopters totals=capability.totals data-title="::capability.name + \' Adopters\'"></cc-chart></td><td class=controls ng-if="::appCtrl.isAuthorized(\'EDIT_CAPABILITY:PARTIAL\')"><bb-context-menu><li><a href ui-sref="capability-form(::{ capabilityId: capability._id })"><i class="fa fa-pencil"></i> Edit</a></li></bb-context-menu></td></tr></tbody></table></div></li></ul></div></div>'),a.put("../public/app/components/chart/chart.html",'<div class=chart ng-if=::chartCtrl.model.length ng-click=chartCtrl.openModal()><div class=meter style="width:{{:: chartCtrl.model.length * 30 }}px"><div ng-repeat="total in ::chartCtrl.totals track by $index" class="bar {{:: total.class }}" style="width:{{:: total.percentage }}%" tooltip-placement=top tooltip-popup-delay=200 uib-tooltip="{{:: total.model.adoptionStatus.name }} · {{::total.count}} adopting"></div></div></div>'),a.put("../public/app/components/forms/login/login-form.html",'<div bb-scroll-into-view=formCtrl.scrollToTop><div ng-if=formCtrl.success class="alert alert-success" ng-bind-html=formCtrl.trustHtml(formCtrl.success)></div><div ng-if=formCtrl.error class="alert alert-danger" ng-bind-html=formCtrl.trustHtml(formCtrl.error)></div><div ng-if=formCtrl.isBlackbaudAuthenticated><button class="btn btn-primary">Login using Blackbaud.com</button></div><form name=loginForm id=form-login class=form-horizontal ng-submit=formCtrl.submit() method=post novalidate><div class=form-group ng-class="{\'has-error\': loginForm.emailAddress.$touched && loginForm.emailAddress.$invalid}"><label class="col-sm-2 control-label">Email Address:</label><div class=col-sm-10><input class=form-control id=email-address name=emailAddress ng-model=formCtrl.formData.emailAddress placeholder=(required) required><div ng-show="loginForm.emailAddress.$touched && loginForm.emailAddress.$invalid" class=help-block>Email Address is required.</div></div></div><div class=form-group ng-class="{\'has-error\': loginForm.password.$touched && loginForm.password.$invalid}"><label class="col-sm-2 control-label">Password:</label><div class=col-sm-10><input class=form-control type=password name=password ng-model=formCtrl.formData.password placeholder=(required) required><div ng-show="loginForm.password.$touched && loginForm.password.$invalid" class=help-block>Password is required.</div></div></div><div class="form-group form-buttons"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-primary btn-lg" id=login-form-button type=submit ng-disabled=loginForm.$invalid><i class="fa fa-login"></i>Log In</button></div></div><div class="pull-right reset-request-text"><span>Forgot password?</span> <a ui-sref="reset-password({token: null})">Request reset</a></div></form></div>'),a.put("../public/app/components/modals/chart-modal.html",'<bb-modal><div class=modal-wrapper><bb-modal-header>{{:: modalCtrl.title }}</bb-modal-header><div class="modal-body modal-table"><div class=table-responsive><table class="table table-striped"><tr ng-repeat="item in ::modalCtrl.model track by $index"><td><h4 ng-bind=::item.name></h4><div><span ng-bind-html=::item.defaultComment></span>&nbsp; <span ng-bind-html=::item.comment></span></div></td><td style="white-space: nowrap"><span class="bullet {{:: item.class }}"></span><span ng-bind=::item.adoptionStatus.name></span></td></tr></table></div></div><bb-modal-footer><button ng-click=$close() class="btn btn-default">Close</button></bb-modal-footer></div></bb-modal>'),a.put("../public/app/components/modals/login-modal.html","<bb-modal><div class=modal-form><bb-modal-header>Editor Log In</bb-modal-header><div bb-modal-body><cc-login-form on-success=contentCtrl.onSuccess></cc-login-form></div><bb-modal-footer><bb-modal-footer-button-primary ng-click=contentCtrl.login()>Log In</bb-modal-footer-button-primary><bb-modal-footer-button-cancel></bb-modal-footer-button-cancel></bb-modal-footer></div></bb-modal>"),a.put("../public/app/components/popovers/adoption-status-chart.html",'<div class=popover-content><ul class=badge-list><li ng-repeat="product in ::capability.products"><a href class="{{:: product.class }}" bb-popover-template=../public/app/components/popovers/product-comment.html data-popover-title="{{:: product.adoptionStatus.name }}"><span class=badge-list-name ng-bind=::product.name></span> <span class=badge-list-description ng-bind=::product.adoptionStatus.name></span></a></li></ul></div>'),a.put("../public/app/components/popovers/default.html","<div class=popover-content><div ng-bind-html=::popoverCtrl.body></div></div>"),a.put("../public/app/components/popovers/product-comment.html","<div><span ng-bind-html=::item.defaultComment></span>&nbsp; <span ng-bind-html=::item.comment></span></div>"),a.put("../public/app/components/product-list/product-list.html",'<div class="section section-info capabilities-catalog" id=section-products><div class=container><header><h2>Products</h2><p class=controls ng-if="::listCtrl.isAuthorized(\'CREATE_PRODUCT_GROUP\')"><a class="btn btn-default" href ui-sref=product-group-form><i class="fa fa-plus"></i>Add Product Group</a></p></header><div class=section-body ng-repeat="productGroup in items track by productGroup._id" ng-if="productGroup.value.length || (listCtrl.isAuthorized(\'CREATE_PRODUCT\') && !hideHeadings)"><header><h3 ng-bind=::productGroup.name></h3><p class=controls ng-if="::listCtrl.isAuthorized(\'CREATE_PRODUCT\')"><a class="btn btn-default btn-sm" href ui-sref="product-group-form(::{ groupId: productGroup._id })" ng-if="::listCtrl.isAuthorized(\'EDIT_PRODUCT_GROUP\') && productGroup._id"><i class="fa fa-pencil"></i>Edit Group</a> <a class="btn btn-default btn-sm" href ui-sref="product-form(::{ groupId: productGroup._id })"><i class="fa fa-plus"></i>Add Product</a></p></header><ul class="meter-list row" ng-sortable=productGroup.sortConfig><li class="meter-list-item col-sm-4" ng-class="::{ draggable: listCtrl.isAuthorized(\'EDIT_PRODUCT:FULL\') }" ng-repeat="product in productGroup.value track by product._id"><div class=featurette><a class=featurette-body href ui-sref="product(::{ productSlug: product.slug })"><h4 class=featurette-title><span ng-bind=::product.name></span></h4><span class=stats><span class=stat ng-bind="::product.adoptees.length + \'&nbsp;services&nbsp;adopted\'"></span> <span ng-if=product.lastUpdated class=stat ng-bind=::product.lastUpdated.formatted.friendly></span></span><div class=controls ng-if="::listCtrl.isAuthorized(\'EDIT_PRODUCT:PARTIAL\')"><button class="btn btn-xs btn-link" ng-click="listCtrl.goto(\'product-form\', { productId: product._id }, $event)"><i class="fa fa-pencil"></i></button></div></a><div class=featurette-footer><cc-chart model=product.adoptees totals=product.totals data-title="::\'Services Adopted by \' + product.name"></cc-chart></div></div></li></ul></div></div></div>'),a.put("../public/app/components/product-table/product-table.html",'<div class="section section-info capabilities-catalog" id=section-products><div class=container><header><h2>Products</h2><p class=controls ng-if="::appCtrl.isAuthorized(\'CREATE_PRODUCT_GROUP\')"><a class="btn btn-default" href ui-sref=product-group-form><i class="fa fa-plus"></i>Add Product Group</a></p></header><ul class="table-list capability-list"><li class=table-list-item ng-repeat="productGroup in ::listCtrl.products track by productGroup._id" ng-if="::productGroup.products.length || appCtrl.isAuthorized(\'CREATE_PRODUCT\')"><div class=table-list-heading><h3 ng-bind=::productGroup.name></h3><p class=controls ng-if="::appCtrl.isAuthorized(\'CREATE_PRODUCT\')"><a class="btn btn-default btn-sm" href ui-sref="product-group-form(::{ groupId: productGroup._id })" ng-if="::appCtrl.isAuthorized(\'EDIT_PRODUCT_GROUP\') && productGroup._id"><i class="fa fa-pencil"></i>Edit Group</a> <a class="btn btn-default btn-sm" href ui-sref="product-form({ groupId: productGroup._id })"><i class="fa fa-plus"></i>Add Product</a></p></div><div class=table-responsive><table class="table table-striped"><thead><tr><th class=name>Product</th><th class=stats>Capabilities Adopted and Status</th><th ng-if="::appCtrl.isAuthorized(\'EDIT_PRODUCT:PARTIAL\')"></th></tr></thead><tbody ng-sortable=productGroup.sortConfig><tr ng-class="::{ draggable: appCtrl.isAuthorized(\'EDIT_PRODUCT:FULL\') }" ng-repeat="product in productGroup.products track by product._id"><td class=name><h4 ng-bind=::product.name></h4></td><td class=stats><cc-chart model=product.capabilities totals=product.totals data-title="::\'Services Adopted by \' + product.name"></cc-chart></td><td class=controls ng-if="::appCtrl.isAuthorized(\'EDIT_PRODUCT:PARTIAL\')"><bb-context-menu><li><a href ui-sref="product-form(::{ productId: product._id })"><i class="fa fa-pencil"></i> Edit</a></li></bb-context-menu></td></tr></tbody></table></div></li></ul></div></div>'),a.put("../public/app/components/sortable-table/sortable-table.html",'<div class=table-responsive><table class="table table-striped table-sortable"><tr><th ng-repeat="column in sortableCtrl.columns track by $index" ng-class="{\'active\':sortableCtrl.isActiveColumn(column)}"><span ng-if=!sortableCtrl.isOrderable(column) ng-bind=column.name></span> <a ng-if=sortableCtrl.isOrderable(column) href ng-click=sortableCtrl.setOrderBy(column.model)><span ng-bind=column.name></span> <span class=carets ng-if=sortableCtrl.isActiveColumn(column)><i class="fa fa-fw fa-sort-alpha-asc table-sortable-caret" ng-if=!sortableCtrl.ascending aria-hidden=true></i> <i class="fa fa-fw fa-sort-alpha-desc table-sortable-caret" ng-if=sortableCtrl.ascending aria-hidden=true></i></span></a></th></tr><tbody><tr ng-repeat="item in sortableCtrl.model | orderBy:sortableCtrl.orderBy:sortableCtrl.ascending track by $index"><td ng-repeat="column in sortableCtrl.columns track by $index"><span ng-if=column.model ng-bind="sortableCtrl.parseModelFromString(item, column.model)"></span><div ng-if=column.html ng-bind-html=column.html>{{column.html}}</div><div ng-if=column.button><button ng-click=column.button.action(item) class="btn btn-xs btn-default {{column.button.classnames}}" ng-bind-html=column.button.label></button></div></td></tr></tbody></table></div>'),a.put("../public/app/components/toasts/toast.html",'<div class=toast-container><div class=toast-message><table class="table table-condensed"><tr><td class=toast-icon><i ng-if=::toastCtrl.icon class="fa fa-2x fa-fw {{:: toastCtrl.icon }}"></i></td><td ng-bind=toastCtrl.messageText></td></tr></table></div><div ng-if=::toastCtrl.linkText class=toast-controls><a class="btn btn-default toast-link" href ng-click=toastCtrl.action()>{{:: toastCtrl.linkText }}</a></div></div>')}]);
//# sourceMappingURL=app.min.js.map